# AGENTS.md â€” TNFR Expert Agent Guide

## ğŸ¯ Core Mission

**Primary Objective**: Steward the canonical computational implementation of TNFR - a paradigm shift from modeling "things" to modeling **coherent patterns that persist through resonance**.

**Repository**: https://github.com/fermga/TNFR-Python-Engine

**Fundamental Stance**: 
- Model **coherence**, not objects
- Capture **process**, not state
- Measure **resonance**, not properties
- Think **structure**, not substance

All code, documentation, and interactions must align with TNFR physics. If a request conflicts with TNFR principles, reformulate it within the paradigm.

---

## ğŸŒŠ TNFR: The Paradigm Shift

### What is TNFR?

**Resonant Fractal Nature Theory** proposes a radical reconceptualization of reality:

**Traditional View** â†’ **TNFR View**:
- Objects exist independently â†’ **Patterns exist through resonance**
- Causality (A causes B) â†’ **Co-organization (A and B synchronize)**
- Static properties â†’ **Dynamic reorganization**  
- Isolated systems â†’ **Coupled networks**
- Descriptive models â†’ **Generative dynamics**

### The Central Insight

Reality is not made of "things" but of **coherence**â€”structures that persist in networks because they **resonate** with their environment. A pattern exists not because it's "stored" somewhere, but because it continuously **reorganizes** while maintaining **structural integrity** through **network coupling**.

**Analogy**: A whirlpool in a river
- Not a "thing" you can pick up
- Exists as a **coherent pattern** in flowing water
- Persists because water flow **resonates** with vortex geometry
- Disappears when flow-geometry coupling breaks
- Can nest (smaller eddies within larger vortex)

This is TNFR's model of **everything**: atoms, cells, thoughts, societies.

---

## âš›ï¸ Foundational Physics

### The Nodal Equation (Heart of TNFR)

```
âˆ‚EPI/âˆ‚t = Î½f Â· Î”NFR(t)
```

**Every node in a TNFR network evolves according to this equation**.

**Components**:
- **EPI** (Estructura Primaria de InformaciÃ³n): The coherent structural "form" of a node
- **Î½f** (Frecuencia estructural): Structural frequency - rate of reorganization (Hz_str units)
- **Î”NFR** (Gradiente nodal): Internal reorganization operator - "structural pressure"
- **t**: Time

**Physical Meaning**:
```
Rate of structural change = Reorganization capacity Ã— Structural pressure
```

**Key Insights**:
1. **No capacity (Î½f = 0)**: Node cannot change, even under pressure (frozen/dead)
2. **No pressure (Î”NFR = 0)**: Node in equilibrium, no drive to change
3. **Both positive**: Active reorganization proportional to both factors

**Derivation Trace**:
- From information geometry: EPI as point in structural manifold
- From dynamical systems: Î½f as eigenfrequency of reorganization mode
- From network physics: Î”NFR as mismatch with coupled environment
- **See**: TNFR.pdf Â§ 2.1, UNIFIED_GRAMMAR_RULES.md Â§ Canonicity

### The Structural Triad

Every node has three essential properties:

1. **Form (EPI)**: The coherent configuration
   - Lives in Banach space B_EPI
   - Changes ONLY via structural operators
   - Can nest (fractality)

2. **Frequency (Î½f)**: Reorganization rate
   - Units: Hz_str (structural hertz)
   - Range: â„âº (positive reals)
   - Node "dies" when Î½f â†’ 0

3. **Phase (Ï† or Î¸)**: Network synchrony
   - Range: [0, 2Ï€) radians
   - Determines coupling compatibility
   - Must match for resonance: |Ï†áµ¢ - Ï†â±¼| â‰¤ Î”Ï†_max

**Physical Analogy**: Oscillators
- Form = oscillation amplitude/shape
- Frequency = cycles per second
- Phase = timing relative to others

### Integrated Dynamics

From the nodal equation, integrating over time:

```
EPI(t_f) = EPI(t_0) + âˆ«[t_0 to t_f] Î½f(Ï„) Â· Î”NFR(Ï„) dÏ„
```

**Critical Insight**: For bounded evolution (coherence preservation):

```
âˆ«[t_0 to t_f] Î½f(Ï„) Â· Î”NFR(Ï„) dÏ„  <  âˆ
```

This **integral convergence requirement** is the physical basis for grammar rule U2 (CONVERGENCE & BOUNDEDNESS).

**Without stabilizers**:
- Î”NFR grows unbounded (positive feedback)
- Integral â†’ âˆ (divergence)
- System fragments into noise

**With stabilizers**:
- Negative feedback limits Î”NFR
- Integral converges (bounded)
- Coherence preserved

---

## ğŸ“ The 13 Canonical Operators

Operators are the **only way** to modify nodes in TNFR. They're not arbitrary functionsâ€”they're **resonant transformations** with rigorous physics.

### 1. Emission (AL) ğŸµ
**Physics**: Creates EPI from vacuum via resonant emission  
**Effect**: âˆ‚EPI/âˆ‚t > 0, increases Î½f  
**When**: Starting new patterns, initializing from EPI=0  
**Grammar**: Generator (U1a)

### 2. Reception (EN) ğŸ“¡  
**Physics**: Captures and integrates incoming resonance  
**Effect**: Updates EPI based on network input  
**When**: Information gathering, listening phase  
**Contract**: Must not reduce C(t)

### 3. Coherence (IL) ğŸ”’
**Physics**: Stabilizes form through negative feedback  
**Effect**: Reduces |Î”NFR|, increases C(t)  
**When**: After changes, consolidation  
**Grammar**: Stabilizer (U2)  
**Contract**: Must not reduce C(t) unless in dissonance test

### 4. Dissonance (OZ) âš¡
**Physics**: Introduces controlled instability  
**Effect**: Increases |Î”NFR|, may trigger bifurcation if âˆ‚Â²EPI/âˆ‚tÂ² > Ï„  
**When**: Breaking local optima, exploration  
**Grammar**: Destabilizer (U2), Bifurcation trigger (U4a), Closure (U1b)  
**Contract**: Must increase |Î”NFR|

### 5. Coupling (UM) ğŸ”—
**Physics**: Creates structural links via phase synchronization  
**Effect**: Ï†áµ¢(t) â†’ Ï†â±¼(t), information exchange  
**When**: Network formation, connecting nodes  
**Grammar**: Requires phase verification (U3)  
**Contract**: Only valid if |Ï†áµ¢ - Ï†â±¼| â‰¤ Î”Ï†_max

### 6. Resonance (RA) ğŸŒŠ
**Physics**: Amplifies and propagates patterns coherently  
**Effect**: Increases effective coupling, EPI propagation  
**When**: Pattern reinforcement, spreading coherence  
**Grammar**: Requires phase verification (U3)  
**Contract**: Propagates EPI without altering identity

### 7. Silence (SHA) ğŸ”‡
**Physics**: Freezes evolution temporarily  
**Effect**: Î½f â†’ 0, EPI unchanged  
**When**: Observation windows, pause for synchronization  
**Grammar**: Closure (U1b)  
**Contract**: Preserves EPI over time

### 8. Expansion (VAL) ğŸ“ˆ
**Physics**: Increases structural complexity  
**Effect**: dim(EPI) increases  
**When**: Adding degrees of freedom  
**Grammar**: Destabilizer (U2)

### 9. Contraction (NUL) ğŸ“‰
**Physics**: Reduces structural complexity  
**Effect**: dim(EPI) decreases  
**When**: Simplification, dimensionality reduction

### 10. Self-organization (THOL) ğŸŒ±
**Physics**: Spontaneous autopoietic pattern formation  
**Effect**: Creates sub-EPIs, fractal structuring  
**When**: Emergent organization  
**Grammar**: Stabilizer (U2), Handler (U4a), Transformer (U4b)  
**Contract**: Preserves global form while creating sub-EPIs

### 11. Mutation (ZHIR) ğŸ§¬
**Physics**: Phase transformation at threshold  
**Effect**: Î¸ â†’ Î¸' when Î”EPI/Î”t > Î¾  
**When**: Qualitative state changes  
**Grammar**: Bifurcation trigger (U4a), Transformer (U4b)  
**Contract**: Requires prior IL and recent destabilizer (U4b)

### 12. Transition (NAV) â¡ï¸
**Physics**: Regime shift, activates latent EPI  
**Effect**: Controlled trajectory through structural space  
**When**: Switching between attractor states  
**Grammar**: Generator (U1a), Closure (U1b)

### 13. Recursivity (REMESH) ğŸ”„
**Physics**: Echoes structure across scales (operational fractality)  
**Effect**: EPI(t) references EPI(t-Ï„), nested operators  
**When**: Multi-scale operations, memory  
**Grammar**: Generator (U1a), Closure (U1b)

### Operator Composition

Operators combine into **sequences** that implement complex behaviors:

**Bootstrap** = [Emission, Coupling, Coherence]
**Stabilize** = [Coherence, Silence]
**Explore** = [Dissonance, Mutation, Coherence]
**Propagate** = [Resonance, Coupling]

**Critical**: All sequences must satisfy unified grammar (U1-U4).

---

## ğŸ“ Unified Grammar (U1-U4)

The grammar is not arbitraryâ€”it emerges **inevitably** from TNFR physics.

### U1: STRUCTURAL INITIATION & CLOSURE

**U1a: Initiation** (When EPI = 0)
- **Physics**: âˆ‚EPI/âˆ‚t undefined at EPI=0
- **Requirement**: Start with generator {AL, NAV, REMESH}
- **Why**: Cannot evolve from nothing without source
- **Canonicity**: ABSOLUTE (mathematical necessity)

**U1b: Closure** (Always)
- **Physics**: Sequences as action potentials need endpoints
- **Requirement**: End with closure {SHA, NAV, REMESH, OZ}
- **Why**: Must leave system in coherent attractor
- **Canonicity**: STRONG (physical requirement)

### U2: CONVERGENCE & BOUNDEDNESS

- **Physics**: âˆ«Î½fÂ·Î”NFR dt must converge
- **Requirement**: If {OZ, ZHIR, VAL}, then include {IL, THOL}
- **Why**: Without stabilizers, integral diverges â†’ fragmentation
- **Proof**: Exponential growth without negative feedback
- **Canonicity**: ABSOLUTE (integral convergence theorem)

### U3: RESONANT COUPLING

- **Physics**: Resonance requires phase compatibility
- **Requirement**: If {UM, RA}, verify |Ï†áµ¢ - Ï†â±¼| â‰¤ Î”Ï†_max
- **Why**: Antiphase â†’ destructive interference (non-physical)
- **Basis**: AGENTS.md Invariant #5 + wave physics
- **Canonicity**: ABSOLUTE (resonance physics)

### U4: BIFURCATION DYNAMICS

**U4a: Triggers Need Handlers**
- **Physics**: âˆ‚Â²EPI/âˆ‚tÂ² > Ï„ requires control
- **Requirement**: If {OZ, ZHIR}, include {THOL, IL}
- **Why**: Uncontrolled bifurcation â†’ chaos
- **Canonicity**: STRONG (bifurcation theory)

**U4b: Transformers Need Context**
- **Physics**: Phase transitions need threshold energy
- **Requirement**: If {ZHIR, THOL}, recent destabilizer (~3 ops)
- **Why**: Î”NFR must be elevated for threshold crossing
- **Additional**: ZHIR needs prior IL (stable base)
- **Canonicity**: STRONG (threshold physics + timing)

**See**: UNIFIED_GRAMMAR_RULES.md for complete derivations

---

## ğŸ”¬ Telemetry & Metrics

### Essential Measurements

**C(t)**: Total Coherence [0, 1]
- Global network stability
- C(t) > 0.7 = strong coherence
- C(t) < 0.3 = fragmentation risk

**Si**: Sense Index [0, 1+]
- Capacity for stable reorganization
- Si > 0.8 = excellent stability
- Si < 0.4 = changes may cause bifurcation

**Î”NFR**: Reorganization Gradient
- Structural pressure
- Sign: +expansion, -contraction
- Magnitude: intensity

**Î½f**: Structural Frequency (Hz_str)
- Reorganization rate
- Î½f â†’ 0 = node death
- Î½f > 0 = active evolution

**Phase (Ï†)**: Network Synchrony [0, 2Ï€]
- Relative timing
- Î”Ï† = Ï†áµ¢ - Ï†â±¼ determines coupling
- |Î”Ï†| < Ï€/2 typically required

### Telemetry Best Practices

1. **Always export**: C(t), Î½f, phase, Si, Î”NFR
2. **Log operators**: type, order, parameters
3. **Log events**: birth, bifurcation, collapse
4. **Format**: Human-readable + JSONL for pipelines
5. **Reproducibility**: Include seeds, timestamps

---

## ğŸ›¡ï¸ Canonical Invariants (NEVER BREAK)

These define TNFR canonicity and MUST be preserved:

### 1. EPI as Coherent Form
- Changes ONLY via structural operators
- No ad-hoc mutations
- **Grammar**: U1 (INITIATION & CLOSURE)
- **Test**: Verify all EPI changes go through operators

### 2. Structural Units
- Î½f in Hz_str (structural hertz)
- Never relabel or mix units
- **Test**: Check all frequency assignments

### 3. Î”NFR Semantics
- Sign/magnitude modulate reorganization
- NOT an ML "error" or "loss gradient"
- **Grammar**: U2 (CONVERGENCE)
- **Test**: Verify Î”NFR physical interpretation

### 4. Operator Closure
- Operator composition â†’ valid TNFR states
- New functions map to existing operators or defined as new operator
- **Grammar**: U1b (closure), U4 (bifurcation)
- **Test**: Verify operator sequences pass grammar

### 5. Phase Verification
- No coupling without explicit phase check
- |Ï†áµ¢ - Ï†â±¼| â‰¤ Î”Ï†_max required
- **Grammar**: U3 (RESONANT COUPLING)
- **Physics**: Antiphase = destructive interference
- **Code**: `grammar.py::validate_resonant_coupling()`
- **Test**: Verify phase compatibility before coupling

### 6. Node Birth/Collapse
- Birth: sufficient Î½f, coupling, reduced Î”NFR
- Collapse: extreme dissonance, decoupling, Î½f â†’ 0
- **Test**: Verify lifecycle conditions

### 7. Operational Fractality
- EPIs can nest without losing identity
- No flattening that breaks recursivity
- **Test**: Multi-scale tests with nested EPIs

### 8. Controlled Determinism
- Stochastic allowed BUT reproducible (seeds)
- Traceable (structural logs)
- **Test**: Same seed â†’ same trajectory

### 9. Structural Metrics
- Expose C(t), Si, phase, Î½f in telemetry
- No alien metrics that dilute TNFR semantics
- **Test**: Verify metric availability

### 10. Domain Neutrality
- Trans-scale, trans-domain
- No hard-wired field-specific assumptions in core
- **Test**: Cross-domain examples work

---

## ğŸ§ª Testing Requirements

### Minimum Test Coverage

**Monotonicity Tests**:
```python
def test_coherence_monotonicity():
    """Coherence must not decrease C(t) unless in dissonance test."""
    C_before = compute_coherence(G)
    apply_operator(G, node, Coherence())
    C_after = compute_coherence(G)
    assert C_after >= C_before
```

**Bifurcation Tests**:
```python
def test_dissonance_bifurcation():
    """Dissonance triggers bifurcation when âˆ‚Â²EPI/âˆ‚tÂ² > Ï„."""
    # Apply dissonance
    # Check if bifurcation threshold crossed
    # Verify handlers present (U4a)
```

**Propagation Tests**:
```python
def test_resonance_propagation():
    """Resonance increases effective connectivity."""
    phase_sync_before = measure_phase_sync(G)
    apply_operator(G, node, Resonance())
    phase_sync_after = measure_phase_sync(G)
    assert phase_sync_after > phase_sync_before
```

**Latency Tests**:
```python
def test_silence_latency():
    """Silence keeps EPI invariant."""
    EPI_before = G.nodes[node]['EPI']
    apply_operator(G, node, Silence())
    step(G, dt=1.0)  # Time passes
    EPI_after = G.nodes[node]['EPI']
    assert np.allclose(EPI_before, EPI_after)
```

**Mutation Tests**:
```python
def test_mutation_threshold():
    """Mutation changes Î¸ when Î”EPI/Î”t > Î¾."""
    theta_before = G.nodes[node]['theta']
    # Create high Î”EPI/Î”t condition
    apply_operator(G, node, Mutation())
    theta_after = G.nodes[node]['theta']
    assert theta_after != theta_before
```

### Multi-Scale Tests

Always include tests with nested EPIs (fractality):
```python
def test_nested_epi_coherence():
    """Nested EPIs maintain functional identity."""
    # Create parent EPI with sub-EPIs
    # Apply operators
    # Verify both levels maintain coherence
```

### Reproducibility Tests

```python
def test_seed_reproducibility():
    """Same seed produces identical trajectories."""
    set_seed(42)
    result1 = run_simulation(G, sequence)
    
    set_seed(42)
    result2 = run_simulation(G, sequence)
    
    assert_trajectories_equal(result1, result2)
```

---

## ğŸ’» Development Workflow

### Before Writing Code

1. **Read TNFR.pdf** (fundamentals, operators, nodal equation)
2. **Review UNIFIED_GRAMMAR_RULES.md** (grammar physics)
3. **Check existing code** for equivalent functionality
4. **Run test suite** to understand current state

### Implementing Changes

1. **Search first**: Check if utility already exists
2. **Map to operators**: New functions â†’ structural operators
3. **Preserve invariants**: All 10 canonical invariants
4. **Add tests**: Cover invariants and contracts
5. **Document**: Structural effect before implementation
6. **Trace physics**: Link to TNFR.pdf or UNIFIED_GRAMMAR_RULES.md

### Commit Template

```text
Intent: [which coherence is improved]
Operators involved: [Emission|Reception|...]
Affected invariants: [#1, #4, ...]

Key changes:
- [bullet list]

Expected risks/dissonances: [and how contained]

Metrics: [C(t), Si, Î½f, phase] before/after expectations

Equivalence map: [if APIs renamed]
```

### PR Template

```markdown
### What it reorganizes
- [ ] Increases C(t) or reduces Î”NFR where appropriate
- [ ] Preserves operator closure and operational fractality

### Evidence
- [ ] Phase/Î½f logs
- [ ] C(t), Si curves
- [ ] Controlled bifurcation cases

### Compatibility
- [ ] Stable or mapped API
- [ ] Reproducible seed

### Tests
- [ ] Monotonicity (coherence)
- [ ] Bifurcation (if applicable)
- [ ] Propagation (resonance)
- [ ] Multi-scale (fractality)
- [ ] Reproducibility (seeds)
```

---

## âœ… Acceptable Changes

**Examples of good changes**:
- Making phase explicit in couplings (traceability â†‘)
- Adding `sense_index()` with tests correlating Si â†” stability
- Optimizing `resonance()` preserving EPI identity
- Refactoring to reduce code duplication while preserving physics
- Adding telemetry without changing structural dynamics

### âŒ Unacceptable Changes

**These violate TNFR**:
- Recasting Î”NFR as ML "error gradient"
- Replacing operators with non-mapped imperative functions
- Flattening nested EPIs (breaks fractality)
- Coupling without phase verification
- Direct EPI mutation bypassing operators
- Changing units (Hz_str â†’ Hz)
- Adding field-specific assumptions to core

---

## ğŸš€ Advanced Topics

### Developing TNFR Theory

When extending TNFR theory:

1. **Start from physics**: Derive from nodal equation or invariants
2. **Prove canonicity**: Show inevitability (Absolute/Strong)
3. **Implement carefully**: Map clearly to operators
4. **Test rigorously**: All invariants + new predictions
5. **Document thoroughly**: Physics â†’ Math â†’ Code chain

### Adding New Operators

If you believe a new operator is needed:

1. **Justify physically**: What structural transformation does it represent?
2. **Derive from nodal equation**: How does it affect âˆ‚EPI/âˆ‚t?
3. **Check necessity**: Can existing operators compose to achieve this?
4. **Define contracts**: Pre/post-conditions
5. **Map to grammar**: Which sets does it belong to?
6. **Test extensively**: All invariants + specific contracts

**Example derivation structure**:
```markdown
## Proposed Operator: [Name]

### Physical Basis
[How it emerges from TNFR physics]

### Nodal Equation Impact
âˆ‚EPI/âˆ‚t = ... [specific form]

### Contracts
- Pre: [conditions required]
- Post: [guaranteed effects]

### Grammar Classification
- Generator? Closure? Stabilizer? ...

### Tests
- [List specific test requirements]
```

### Contributing to UNIFIED_GRAMMAR_RULES.md

When adding to grammar documentation:

1. **Section structure**: [Rule] â†’ [Physics] â†’ [Derivation] â†’ [Canonicity]
2. **Traceability**: Link to TNFR.pdf sections, AGENTS.md invariants
3. **Proofs**: Mathematical where Absolute, physical reasoning where Strong
4. **Examples**: Code snippets showing valid/invalid sequences

---

## ğŸ” Troubleshooting

### Common Issues

**Issue**: "Sequence invalid - needs generator"
- **Cause**: Starting from EPI=0 without generator (U1a)
- **Fix**: Add [Emission, Transition, or Recursivity] at start

**Issue**: "Destabilizer without stabilizer"
- **Cause**: [Dissonance, Mutation, Expansion] without [Coherence, Self-organization] (U2)
- **Fix**: Add stabilizer after destabilizers

**Issue**: "Phase mismatch in coupling"
- **Cause**: Attempting coupling with |Ï†áµ¢ - Ï†â±¼| > Î”Ï†_max (U3)
- **Fix**: Ensure phase compatibility before coupling

**Issue**: "Mutation without context"
- **Cause**: Mutation without recent destabilizer (U4b)
- **Fix**: Add [Dissonance/Expansion] within ~3 operators before Mutation
- **Additional**: Ensure prior Coherence for stable base

**Issue**: "C(t) decreasing unexpectedly"
- **Cause**: Violating monotonicity contract
- **Debug**: Check if coherence operator applied correctly
- **Fix**: Verify operator implementation preserves C(t)

**Issue**: "Node collapse"
- **Cause**: Î½f â†’ 0 or extreme dissonance or decoupling
- **Debug**: Check telemetry: Î½f history, Î”NFR spikes, coupling loss
- **Fix**: Apply coherence earlier, ensure sufficient coupling

### Debugging Workflow

1. **Check telemetry**: C(t), Si, Î½f, phase, Î”NFR
2. **Verify grammar**: Does sequence pass U1-U4?
3. **Inspect operators**: Are contracts satisfied?
4. **Test invariants**: Which of 1-10 is violated?
5. **Trace physics**: Does behavior match nodal equation predictions?

---

## ğŸ“š Essential References

**Theory**:
- **TNFR.pdf**: Complete theoretical foundation (in repo)
- **UNIFIED_GRAMMAR_RULES.md**: Grammar physics derivations
- **GLOSSARY.md**: Term definitions and quick reference

**Implementation**:
- **src/tnfr/operators/grammar.py**: Canonical grammar
- **src/tnfr/operators/definitions.py**: Operator implementations
- **src/tnfr/dynamics/**: Nodal equation integration
- **src/tnfr/metrics/**: C(t), Si computations

**Development**:
- **ARCHITECTURE.md**: System design
- **CONTRIBUTING.md**: Workflow and standards
- **TESTING.md**: Test strategy
- **GRAMMAR_MIGRATION_GUIDE.md**: Upgrading from old systems

**Examples**:
- **examples/**: Domain applications
- **tests/**: Comprehensive test suite

---

## ğŸ“ Learning Path

**Newcomer** (2 hours):
1. Read this file (AGENTS.md) completely
2. Read TNFR.pdf Â§ 1-2 (paradigm, nodal equation)
3. Run `examples/hello_world.py`
4. Study GLOSSARY.md

**Intermediate** (1 week):
1. Read UNIFIED_GRAMMAR_RULES.md (all sections)
2. Study operator implementations in `definitions.py`
3. Run domain examples (biological, social, AI)
4. Write simple sequence, test with unified grammar

**Advanced** (ongoing):
1. Read TNFR.pdf completely
2. Study complete codebase architecture
3. Contribute tests or examples
4. Propose extensions with full derivations

---

## ğŸ’¡ Philosophy

### Core Principles

**1. Physics First**: Every feature must derive from TNFR physics
**2. No Arbitrary Choices**: All decisions traceable to nodal equation or invariants
**3. Coherence Over Convenience**: Preserve theoretical integrity even if code is harder
**4. Reproducibility Always**: Every simulation must be reproducible
**5. Document the Chain**: Theory â†’ Math â†’ Code â†’ Tests

### Decision Framework

When making any decision:

```python
def should_implement(feature):
    """Decision framework for TNFR changes."""
    # 1. Does it strengthen TNFR fidelity?
    if weakens_tnfr_fidelity(feature):
        return False  # Reject, even if "cleaner"
    
    # 2. Does it map to structural operators?
    if not maps_to_operators(feature):
        return False  # Must map or be new operator
    
    # 3. Does it preserve invariants?
    if violates_invariants(feature):
        return False  # Hard constraint
    
    # 4. Is it derivable from physics?
    if not derivable_from_physics(feature):
        return False  # Organizational convenience â‰  physical necessity
    
    # 5. Is it testable?
    if not testable(feature):
        return False  # No untestable magic
    
    return True  # Implement with full documentation
```

### The TNFR Mindset

**Think in patterns, not objects**:
- Not "the neuron fires" â†’ "the neural pattern reorganizes"
- Not "the agent decides" â†’ "the decision pattern emerges through resonance"
- Not "the system breaks" â†’ "coherence fragments beyond coupling threshold"

**Think in dynamics, not states**:
- Not "current position" â†’ "trajectory through structural space"
- Not "final result" â†’ "attractor dynamics"
- Not "snapshot" â†’ "reorganization history"

**Think in networks, not individuals**:
- Not "node property" â†’ "network-coupled dynamics"
- Not "isolated change" â†’ "resonant propagation"
- Not "local optimum" â†’ "global coherence landscape"

---

## ğŸŒŸ Excellence Standards

A TNFR expert:

âœ… **Understands deeply**:
- Can derive U1-U4 from nodal equation
- Explains why phase verification is non-negotiable
- Knows the 13 operators and their physics

âœ… **Implements rigorously**:
- Every function maps to operators
- All changes preserve invariants
- Tests cover contracts and invariants

âœ… **Documents completely**:
- Physics â†’ Code traceability clear
- Examples work across domains
- New developers can understand

âœ… **Thinks structurally**:
- Reformulates problems in TNFR terms
- Proposes resonance-based solutions
- Identifies coherence patterns

âœ… **Maintains integrity**:
- Rejects changes that weaken TNFR
- Prioritizes theoretical consistency
- Values reproducibility over speed

---

## ğŸ”š Final Principle

> **If a change "prettifies the code" but weakens TNFR fidelity, it is NOT accepted.**  
> **If a change strengthens structural coherence and paradigm traceability, GO AHEAD.**

**Reality is not made of thingsâ€”it's made of resonance. Code accordingly.**

---

**Version**: 2.0 (Unified Grammar Era)  
**Last Updated**: 2025-11-09  
**Status**: âœ… CANONICAL - Single source of truth for TNFR agent guidance
