
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Canonical TNFR structural dynamics engine documentation">
      
      
      
        <link rel="canonical" href="https://fermga.github.io/TNFR-Python-Engine/grammar/05-TECHNICAL-IMPLEMENTATION/">
      
      
        <link rel="prev" href="../04-VALID-SEQUENCES/">
      
      
        <link rel="next" href="../06-VALIDATION-AND-TESTING/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Technical Implementation - TNFR Python Engine</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#technical-implementation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="TNFR Python Engine" class="md-header__button md-logo" aria-label="TNFR Python Engine" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TNFR Python Engine
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Technical Implementation
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/fermga/TNFR-Python-Engine" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    TNFR Python Engine
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="TNFR Python Engine" class="md-nav__button md-logo" aria-label="TNFR Python Engine" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    TNFR Python Engine
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/fermga/TNFR-Python-Engine" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    TNFR Python Engine
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Welcome to TNFR
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/getting-started/LEARNING_PATHS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Learning Paths
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/getting-started/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quickstart Tutorial
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/getting-started/TNFR_CONCEPTS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Concepts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/getting-started/INTERACTIVE_TUTORIAL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Interactive Tutorial
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/getting-started/FAQ/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAQ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/getting-started/math-backends/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Math Backends
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/getting-started/optional-dependencies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Optional Dependencies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/getting-started/migrating-remesh-window/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Migrating from Remesh Window
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    User Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/user-guide/OPERATORS_GUIDE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Operators Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../STRUCTURAL_FIELDS_TETRAD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Structural Field Tetrad (Canonical)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/user-guide/METRICS_INTERPRETATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Metrics Interpretation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../TROUBLESHOOTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Grammar Documentation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Grammar Documentation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../EXECUTIVE-SUMMARY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Executive Summary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Core Concepts
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Core Concepts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-FUNDAMENTAL-CONCEPTS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fundamental Concepts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-CANONICAL-CONSTRAINTS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canonical Constraints
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03-OPERATORS-AND-GLYPHS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Operators and Glyphs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04-VALID-SEQUENCES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Valid Sequences
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Implementation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Implementation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Technical Implementation
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Technical Implementation
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#purpose" class="md-nav__link">
    <span class="md-ellipsis">
      
        Purpose
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architecture Overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-components" class="md-nav__link">
    <span class="md-ellipsis">
      
        Core Components
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Files
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operator-sets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operator Sets
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Operator Sets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Set Operations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#main-validation-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Main Validation Functions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Main Validation Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#convenience-function-validate_grammar" class="md-nav__link">
    <span class="md-ellipsis">
      
        Convenience Function: validate_grammar()
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#full-validator-grammarvalidatorvalidate" class="md-nav__link">
    <span class="md-ellipsis">
      
        Full Validator: GrammarValidator.validate()
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementation Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#individual-validation-methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        Individual Validation Methods
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Individual Validation Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#u1a-validate_initiation" class="md-nav__link">
    <span class="md-ellipsis">
      
        U1a: validate_initiation()
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#u1b-validate_closure" class="md-nav__link">
    <span class="md-ellipsis">
      
        U1b: validate_closure()
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#u2-validate_convergence" class="md-nav__link">
    <span class="md-ellipsis">
      
        U2: validate_convergence()
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#phase-validation-u3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase Validation (U3)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Phase Validation (U3)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validation-approach" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validation Approach
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runtime-phase-check" class="md-nav__link">
    <span class="md-ellipsis">
      
        Runtime Phase Check
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-with-operators" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integration with Operators
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Integration with Operators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#operator-base-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operator Base Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validation-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validation Integration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telemetry-and-logging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Telemetry and Logging
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Telemetry and Logging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#essential-telemetry" class="md-nav__link">
    <span class="md-ellipsis">
      
        Essential Telemetry
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operator-logging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operator Logging
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Performance Considerations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validation-cost" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validation Cost
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimization-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Optimization Strategies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lazy-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lazy Validation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extension-points" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extension Points
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extension Points">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-new-operators" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adding New Operators
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-new-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adding New Constraints
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-messages" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Messages
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Error Messages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#design-principles" class="md-nav__link">
    <span class="md-ellipsis">
      
        Design Principles
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-message-template" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Message Template
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-hooks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Hooks
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing Hooks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validation-testing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validation Testing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integration-testing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integration Testing
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-notes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Migration Notes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Migration Notes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#from-legacy-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        From Legacy System
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Next Steps
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06-VALIDATION-AND-TESTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Validation and Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07-MIGRATION-AND-EVOLUTION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Migration and Evolution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08-QUICK-REFERENCE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../GLOSSARY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../MASTER-INDEX/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Master Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OPERATORS-CATALOG-SUMMARY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Operators Catalog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CROSS-REFERENCE-INDEX/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cross-Reference Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CODE_DOCS_CROSSREF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Code Documentation Cross-Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tooling
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tooling
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TOOLING-AND-AUTOMATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tooling and Automation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TESTING-SUMMARY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing Summary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deprecation Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Examples
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Notebooks & Patterns
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Notebooks & Patterns
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/fermga/TNFR-Python-Engine/blob/main/notebooks/Fundamental_Particles_TNFR_Atlas.ipynb" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fundamental Particles TNFR Atlas (Notebook - GitHub)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/fermga/TNFR-Python-Engine/blob/main/src/tnfr/physics/README.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TNFR Patterns (Module Guide)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../INTERACTIONS_GUIDE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Interaction Sequences Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/api/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/api/operators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Structural Operators
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/api/OPERATORS_VISUAL_GUIDE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Operators Visual Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/api/telemetry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Telemetry & Utilities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/api/docstring_style/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docstring Style
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Module Documentation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Module Documentation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/mathematics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mathematics Hub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/physics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Physics Hub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/operators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Operators Hub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/dynamics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dynamics Hub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Metrics Hub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/sdk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SDK Hub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/telemetry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Telemetry Hub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/tutorials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tutorials Hub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/extensions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Extensions Hub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Core Documentation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Core Documentation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DOCUMENTATION_INDEX/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CANONICAL_SOURCES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canonical Sources
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UNIFIED_GRAMMAR_RULES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unified Grammar Rules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AGENTS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agents Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ARCHITECTURE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../GLOSSARY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Advanced Topics
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Advanced Topics
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/advanced/ARCHITECTURE_GUIDE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/advanced/PERFORMANCE_OPTIMIZATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Performance Optimization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/advanced/TESTING_STRATEGIES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing Strategies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/advanced/DEVELOPMENT_WORKFLOW/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development Workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/foundations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mathematical Foundations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_6" >
        
          
          <label class="md-nav__link" for="__nav_9_6" id="__nav_9_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Research Documents
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Research Documents
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../TNFR_FORCES_EMERGENCE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Forces Emergence
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OPERATOR_COMPLETENESS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Operator Completeness
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LIFE_EMERGENCE_FROM_TNFR/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Life Emergence
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CELL_EMERGENCE_FROM_TNFR/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cell Emergence
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/tools/CLI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/security/monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Monitoring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/security/dependency-auditing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dependency Auditing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/security/codeql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CodeQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/security/dependabot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dependabot
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Project Info
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    Project Info
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/releases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Releases
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="technical-implementation">Technical Implementation<a class="headerlink" href="#technical-implementation" title="Permanent link">&para;</a></h1>
<p><strong>Architecture and implementation details of the TNFR grammar system</strong></p>
<p><a href="../"> Home</a>  <a href="../02-CANONICAL-CONSTRAINTS/"> Constraints</a>  <a href="../04-VALID-SEQUENCES/"> Sequences</a>  <a href="../06-VALIDATION-AND-TESTING/"> Testing</a></p>
<hr />
<h2 id="purpose">Purpose<a class="headerlink" href="#purpose" title="Permanent link">&para;</a></h2>
<p>This document details the <strong>technical architecture</strong> of the TNFR grammar validation system, including code structure, algorithms, and integration points.</p>
<p><strong>Prerequisites:</strong> <a href="../02-CANONICAL-CONSTRAINTS/">02-CANONICAL-CONSTRAINTS.md</a>, <a href="../03-OPERATORS-AND-GLYPHS/">03-OPERATORS-AND-GLYPHS.md</a></p>
<p><strong>Audience:</strong> Developers modifying core grammar system</p>
<p><strong>Reading time:</strong> 45-60 minutes</p>
<hr />
<h2 id="architecture-overview">Architecture Overview<a class="headerlink" href="#architecture-overview" title="Permanent link">&para;</a></h2>
<h3 id="core-components">Core Components<a class="headerlink" href="#core-components" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>src/tnfr/operators/
 grammar.py              # Grammar validation (U1-U5)
 definitions.py          # Operator implementations
 unified_grammar.py      # Legacy compatibility layer
</code></pre></div>
<h3 id="key-files">Key Files<a class="headerlink" href="#key-files" title="Permanent link">&para;</a></h3>
<p><strong><code>grammar.py</code></strong> - Main grammar validation
- Defines operator sets (GENERATORS, CLOSURES, etc.)
- Implements <code>validate_grammar()</code> function
- Implements <code>validate_resonant_coupling()</code> for U3
- Contains all U1-U5 validation logic</p>
<p><strong><code>definitions.py</code></strong> - Operator implementations
- Implements all 13 operators as classes
- Each operator modifies graph nodes
- Integrated with grammar validation</p>
<p><strong><code>unified_grammar.py</code></strong> - Compatibility
- Bridges old and new grammar systems
- Provides legacy API
- Will be deprecated</p>
<hr />
<h2 id="operator-sets">Operator Sets<a class="headerlink" href="#operator-sets" title="Permanent link">&para;</a></h2>
<h3 id="definition">Definition<a class="headerlink" href="#definition" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># From src/tnfr/operators/grammar.py</span>

<span class="c1"># U1a: Generators (can start from EPI=0)</span>
<span class="n">GENERATORS</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;emission&quot;</span><span class="p">,</span> <span class="s2">&quot;transition&quot;</span><span class="p">,</span> <span class="s2">&quot;recursivity&quot;</span><span class="p">}</span>

<span class="c1"># U1b: Closures (can end sequences)</span>
<span class="n">CLOSURES</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;silence&quot;</span><span class="p">,</span> <span class="s2">&quot;transition&quot;</span><span class="p">,</span> <span class="s2">&quot;recursivity&quot;</span><span class="p">,</span> <span class="s2">&quot;dissonance&quot;</span><span class="p">}</span>

<span class="c1"># U2: Stabilizers (negative feedback)</span>
<span class="n">STABILIZERS</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;coherence&quot;</span><span class="p">,</span> <span class="s2">&quot;selforganization&quot;</span><span class="p">}</span>

<span class="c1"># U2: Destabilizers (positive feedback)</span>
<span class="n">DESTABILIZERS</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;dissonance&quot;</span><span class="p">,</span> <span class="s2">&quot;mutation&quot;</span><span class="p">,</span> <span class="s2">&quot;expansion&quot;</span><span class="p">}</span>

<span class="c1"># U3: Coupling/Resonance (phase-sensitive)</span>
<span class="n">COUPLING_RESONANCE</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;coupling&quot;</span><span class="p">,</span> <span class="s2">&quot;resonance&quot;</span><span class="p">}</span>

<span class="c1"># U4a: Bifurcation triggers</span>
<span class="n">BIFURCATION_TRIGGERS</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;dissonance&quot;</span><span class="p">,</span> <span class="s2">&quot;mutation&quot;</span><span class="p">}</span>

<span class="c1"># U4a: Bifurcation handlers</span>
<span class="n">BIFURCATION_HANDLERS</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;selforganization&quot;</span><span class="p">,</span> <span class="s2">&quot;coherence&quot;</span><span class="p">}</span>

<span class="c1"># U4b: Transformers (need context)</span>
<span class="n">TRANSFORMERS</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;mutation&quot;</span><span class="p">,</span> <span class="s2">&quot;selforganization&quot;</span><span class="p">}</span>
</code></pre></div>
<h3 id="set-operations">Set Operations<a class="headerlink" href="#set-operations" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_operator_name</span><span class="p">(</span><span class="n">operator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract operator name from instance.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">operator</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">is_generator</span><span class="p">(</span><span class="n">operator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if operator is a generator.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">get_operator_name</span><span class="p">(</span><span class="n">operator</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GENERATORS</span>

<span class="k">def</span><span class="w"> </span><span class="nf">is_closure</span><span class="p">(</span><span class="n">operator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if operator is a closure.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">get_operator_name</span><span class="p">(</span><span class="n">operator</span><span class="p">)</span> <span class="ow">in</span> <span class="n">CLOSURES</span>

<span class="c1"># Similar for other classifications</span>
</code></pre></div>
<hr />
<h2 id="main-validation-functions">Main Validation Functions<a class="headerlink" href="#main-validation-functions" title="Permanent link">&para;</a></h2>
<h3 id="convenience-function-validate_grammar">Convenience Function: <code>validate_grammar()</code><a class="headerlink" href="#convenience-function-validate_grammar" title="Permanent link">&para;</a></h3>
<p><strong>Location</strong>: <code>src/tnfr/operators/grammar.py</code></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">validate_grammar</span><span class="p">(</span>
    <span class="n">sequence</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Operator</span><span class="p">],</span>
    <span class="n">epi_initial</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Validate operator sequence against U1-U5 constraints.</span>

<span class="sd">    Args:</span>
<span class="sd">        sequence: List of operator instances</span>
<span class="sd">        epi_initial: Initial EPI value (0.0 = vacuum)</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if sequence is valid, False otherwise</span>

<span class="sd">    Notes:</span>
<span class="sd">        This is a convenience wrapper around GrammarValidator.validate()</span>
<span class="sd">        that returns only the boolean result. For detailed validation</span>
<span class="sd">        messages, use GrammarValidator.validate() instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<p><strong>Implementation</strong>:
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Operator</span><span class="p">],</span> <span class="n">epi_initial</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate sequence using canonical TNFR grammar constraints.&quot;&quot;&quot;</span>
    <span class="n">is_valid</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">GrammarValidator</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">is_valid</span>
</code></pre></div></p>
<h3 id="full-validator-grammarvalidatorvalidate">Full Validator: <code>GrammarValidator.validate()</code><a class="headerlink" href="#full-validator-grammarvalidatorvalidate" title="Permanent link">&para;</a></h3>
<p><strong>Location</strong>: <code>src/tnfr/operators/grammar.py</code></p>
<div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">validate</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">sequence</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Operator</span><span class="p">],</span>
    <span class="n">epi_initial</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Validate sequence using all unified canonical constraints.</span>

<span class="sd">    This validates pure TNFR physics:</span>
<span class="sd">    - U1: Structural initiation &amp; closure</span>
<span class="sd">    - U2: Convergence &amp; boundedness</span>
<span class="sd">    - U3: Resonant coupling</span>
<span class="sd">    - U4: Bifurcation dynamics</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    sequence : List[Operator]</span>
<span class="sd">        Sequence to validate</span>
<span class="sd">    epi_initial : float, optional</span>
<span class="sd">        Initial EPI value (default: 0.0)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    tuple[bool, List[str]]</span>
<span class="sd">        (is_valid, messages)</span>
<span class="sd">        is_valid: True if all constraints satisfied</span>
<span class="sd">        messages: List of validation messages for each rule</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<h3 id="implementation-structure">Implementation Structure<a class="headerlink" href="#implementation-structure" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># In src/tnfr/operators/grammar.py</span>

<span class="k">class</span><span class="w"> </span><span class="nc">GrammarValidator</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validates sequences using canonical TNFR grammar constraints.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate sequence against all U1-U5 rules.&quot;&quot;&quot;</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">all_valid</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># U1a: Initiation</span>
        <span class="n">valid_init</span><span class="p">,</span> <span class="n">msg_init</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">validate_initiation</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="p">)</span>
        <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;U1a: </span><span class="si">{</span><span class="n">msg_init</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">all_valid</span> <span class="o">=</span> <span class="n">all_valid</span> <span class="ow">and</span> <span class="n">valid_init</span>

        <span class="c1"># U1b: Closure</span>
        <span class="n">valid_closure</span><span class="p">,</span> <span class="n">msg_closure</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">validate_closure</span><span class="p">(</span><span class="n">sequence</span><span class="p">)</span>
        <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;U1b: </span><span class="si">{</span><span class="n">msg_closure</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">all_valid</span> <span class="o">=</span> <span class="n">all_valid</span> <span class="ow">and</span> <span class="n">valid_closure</span>

        <span class="c1"># U2: Convergence</span>
        <span class="n">valid_conv</span><span class="p">,</span> <span class="n">msg_conv</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">validate_convergence</span><span class="p">(</span><span class="n">sequence</span><span class="p">)</span>
        <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;U2: </span><span class="si">{</span><span class="n">msg_conv</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">all_valid</span> <span class="o">=</span> <span class="n">all_valid</span> <span class="ow">and</span> <span class="n">valid_conv</span>

        <span class="c1"># U3: Resonant coupling</span>
        <span class="n">valid_coupling</span><span class="p">,</span> <span class="n">msg_coupling</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">validate_resonant_coupling</span><span class="p">(</span><span class="n">sequence</span><span class="p">)</span>
        <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;U3: </span><span class="si">{</span><span class="n">msg_coupling</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">all_valid</span> <span class="o">=</span> <span class="n">all_valid</span> <span class="ow">and</span> <span class="n">valid_coupling</span>

        <span class="c1"># U4a: Bifurcation triggers</span>
        <span class="n">valid_triggers</span><span class="p">,</span> <span class="n">msg_triggers</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">validate_bifurcation_triggers</span><span class="p">(</span><span class="n">sequence</span><span class="p">)</span>
        <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;U4a: </span><span class="si">{</span><span class="n">msg_triggers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">all_valid</span> <span class="o">=</span> <span class="n">all_valid</span> <span class="ow">and</span> <span class="n">valid_triggers</span>

        <span class="c1"># U4b: Transformer context</span>
        <span class="n">valid_context</span><span class="p">,</span> <span class="n">msg_context</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">validate_transformer_context</span><span class="p">(</span><span class="n">sequence</span><span class="p">)</span>
        <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;U4b: </span><span class="si">{</span><span class="n">msg_context</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">all_valid</span> <span class="o">=</span> <span class="n">all_valid</span> <span class="ow">and</span> <span class="n">valid_context</span>

        <span class="c1"># U2-REMESH: Recursive amplification control</span>
        <span class="n">valid_remesh</span><span class="p">,</span> <span class="n">msg_remesh</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">validate_remesh_amplification</span><span class="p">(</span><span class="n">sequence</span><span class="p">)</span>
        <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;U2-REMESH: </span><span class="si">{</span><span class="n">msg_remesh</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">all_valid</span> <span class="o">=</span> <span class="n">all_valid</span> <span class="ow">and</span> <span class="n">valid_remesh</span>

        <span class="k">return</span> <span class="n">all_valid</span><span class="p">,</span> <span class="n">messages</span>


<span class="k">def</span><span class="w"> </span><span class="nf">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convenience function - returns only bool.&quot;&quot;&quot;</span>
    <span class="n">is_valid</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">GrammarValidator</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">is_valid</span>
</code></pre></div>
<h3 id="individual-validation-methods">Individual Validation Methods<a class="headerlink" href="#individual-validation-methods" title="Permanent link">&para;</a></h3>
<p>Each rule is implemented as a static method returning <code>tuple[bool, str]</code>:</p>
<h4 id="u1a-validate_initiation">U1a: <code>validate_initiation()</code><a class="headerlink" href="#u1a-validate_initiation" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">validate_initiation</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if sequence starts with generator when EPI=0.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">epi_initial</span> <span class="o">&gt;</span> <span class="mf">0.0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;U1a: EPI&gt;0, initiation not required&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">sequence</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;U1a violated: Empty sequence with EPI=0&quot;</span>

    <span class="n">first_op</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">sequence</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;canonical_name&quot;</span><span class="p">,</span> <span class="n">sequence</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>

    <span class="k">if</span> <span class="n">first_op</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">GENERATORS</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="kc">False</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;U1a violated: EPI=0 requires generator (got &#39;</span><span class="si">{</span><span class="n">first_op</span><span class="si">}</span><span class="s2">&#39;). &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Valid: </span><span class="si">{</span><span class="nb">sorted</span><span class="p">(</span><span class="n">GENERATORS</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;U1a satisfied: starts with generator &#39;</span><span class="si">{</span><span class="n">first_op</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
</code></pre></div>
<h4 id="u1b-validate_closure">U1b: <code>validate_closure()</code><a class="headerlink" href="#u1b-validate_closure" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">validate_closure</span><span class="p">(</span><span class="n">sequence</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if sequence ends with closure operator.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">sequence</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;U1b violated: Empty sequence has no closure&quot;</span>

    <span class="n">last_op</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">sequence</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;canonical_name&quot;</span><span class="p">,</span> <span class="n">sequence</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>

    <span class="k">if</span> <span class="n">last_op</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">CLOSURES</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="kc">False</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;U1b violated: Sequence must end with closure (got &#39;</span><span class="si">{</span><span class="n">last_op</span><span class="si">}</span><span class="s2">&#39;). &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Valid: </span><span class="si">{</span><span class="nb">sorted</span><span class="p">(</span><span class="n">CLOSURES</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;U1b satisfied: ends with closure &#39;</span><span class="si">{</span><span class="n">last_op</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
</code></pre></div>
<h4 id="u2-validate_convergence">U2: <code>validate_convergence()</code><a class="headerlink" href="#u2-validate_convergence" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">validate_convergence</span><span class="p">(</span><span class="n">sequence</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check destabilizers have stabilizers for convergence.&quot;&quot;&quot;</span>
    <span class="n">destabilizers_present</span> <span class="o">=</span> <span class="p">[</span>
        <span class="nb">getattr</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="s2">&quot;canonical_name&quot;</span><span class="p">,</span> <span class="n">op</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">sequence</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="s2">&quot;canonical_name&quot;</span><span class="p">,</span> <span class="n">op</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span> <span class="ow">in</span> <span class="n">DESTABILIZERS</span>
    <span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">destabilizers_present</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;U2: not applicable (no destabilizers present)&quot;</span>

    <span class="n">stabilizers_present</span> <span class="o">=</span> <span class="p">[</span>
        <span class="nb">getattr</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="s2">&quot;canonical_name&quot;</span><span class="p">,</span> <span class="n">op</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">sequence</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="s2">&quot;canonical_name&quot;</span><span class="p">,</span> <span class="n">op</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span> <span class="ow">in</span> <span class="n">STABILIZERS</span>
    <span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">stabilizers_present</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="kc">False</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;U2 violated: destabilizers </span><span class="si">{</span><span class="n">destabilizers_present</span><span class="si">}</span><span class="s2"> present &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;without stabilizer. Integral fNFR dt may diverge. &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Add: </span><span class="si">{</span><span class="nb">sorted</span><span class="p">(</span><span class="n">STABILIZERS</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="kc">True</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;U2 satisfied: stabilizers </span><span class="si">{</span><span class="n">stabilizers_present</span><span class="si">}</span><span class="s2"> &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;bound destabilizers </span><span class="si">{</span><span class="n">destabilizers_present</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
<p>See full implementation in <code>src/tnfr/operators/grammar.py</code> for U3, U4a, U4b, and U2-REMESH.</p>
<hr />
<h2 id="phase-validation-u3">Phase Validation (U3)<a class="headerlink" href="#phase-validation-u3" title="Permanent link">&para;</a></h2>
<p>U3 (RESONANT COUPLING) is a <strong>meta-rule</strong> that documents the requirement for phase verification during coupling/resonance operations.</p>
<p><strong>Key Point</strong>: Unlike U1, U2, U4 which validate sequences, U3 validates <strong>runtime operations</strong> when coupling/resonance operators are applied to specific nodes.</p>
<h3 id="validation-approach">Validation Approach<a class="headerlink" href="#validation-approach" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">validate_resonant_coupling</span><span class="p">(</span><span class="n">sequence</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Document U3 awareness for sequences with coupling/resonance.</span>

<span class="sd">    This method checks if sequence contains coupling/resonance operators</span>
<span class="sd">    and returns an awareness message. Actual phase verification happens</span>
<span class="sd">    at runtime in operator preconditions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">coupling_ops</span> <span class="o">=</span> <span class="p">[</span>
        <span class="nb">getattr</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="s2">&quot;canonical_name&quot;</span><span class="p">,</span> <span class="n">op</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">sequence</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="s2">&quot;canonical_name&quot;</span><span class="p">,</span> <span class="n">op</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span> <span class="ow">in</span> <span class="n">COUPLING_RESONANCE</span>
    <span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">coupling_ops</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;U3: not applicable (no coupling/resonance operators)&quot;</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="kc">True</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;U3 awareness: operators </span><span class="si">{</span><span class="n">coupling_ops</span><span class="si">}</span><span class="s2"> require phase verification &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;(MANDATORY per Invariant #5). Enforced in preconditions.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
<h3 id="runtime-phase-check">Runtime Phase Check<a class="headerlink" href="#runtime-phase-check" title="Permanent link">&para;</a></h3>
<p>Phase compatibility is verified when operators are applied to nodes:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># In operator preconditions (during application)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">check_phase_compatibility</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">node_i</span><span class="p">,</span> <span class="n">node_j</span><span class="p">,</span> <span class="n">delta_phi_max</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify phase compatibility for coupling/resonance (U3).</span>

<span class="sd">    Called by Coupling and Resonance operators before creating links.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">phi_i</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node_i</span><span class="p">][</span><span class="s1">&#39;theta&#39;</span><span class="p">]</span>
    <span class="n">phi_j</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node_j</span><span class="p">][</span><span class="s1">&#39;theta&#39;</span><span class="p">]</span>

    <span class="c1"># Compute phase difference</span>
    <span class="n">delta_phi</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">phi_i</span> <span class="o">-</span> <span class="n">phi_j</span><span class="p">)</span>

    <span class="c1"># Normalize to [0, ] (considering periodicity)</span>
    <span class="k">if</span> <span class="n">delta_phi</span> <span class="o">&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">:</span>
        <span class="n">delta_phi</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">-</span> <span class="n">delta_phi</span>

    <span class="c1"># Check compatibility</span>
    <span class="k">if</span> <span class="n">delta_phi</span> <span class="o">&gt;</span> <span class="n">delta_phi_max</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;U3 violation: Phase mismatch |_</span><span class="si">{</span><span class="n">node_i</span><span class="si">}</span><span class="s2"> - _</span><span class="si">{</span><span class="n">node_j</span><span class="si">}</span><span class="s2">| = &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">delta_phi</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> rad &gt; _max = </span><span class="si">{</span><span class="n">delta_phi_max</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> rad&quot;</span>
        <span class="p">)</span>
</code></pre></div>
<p><strong>Location</strong>: Operator preconditions in <code>src/tnfr/operators/preconditions/</code></p>
<hr />
<h2 id="integration-with-operators">Integration with Operators<a class="headerlink" href="#integration-with-operators" title="Permanent link">&para;</a></h2>
<h3 id="operator-base-structure">Operator Base Structure<a class="headerlink" href="#operator-base-structure" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># From definitions.py</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Emission</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    AL - Emission operator.</span>

<span class="sd">    Physics: Creates EPI from vacuum via resonant emission.</span>
<span class="sd">    Grammar: Generator (U1a).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize with parameters.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">kwargs</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">G</span><span class="p">,</span> <span class="n">node_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Apply operator to node.</span>

<span class="sd">        Args:</span>
<span class="sd">            G: NetworkX graph</span>
<span class="sd">            node_id: Target node</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get current state</span>
        <span class="n">current_epi</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;EPI&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">current_vf</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vf&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

        <span class="c1"># Apply transformation</span>
        <span class="n">new_epi</span> <span class="o">=</span> <span class="n">current_epi</span> <span class="o">+</span> <span class="mf">0.1</span>  <span class="c1"># Simplified</span>
        <span class="n">new_vf</span> <span class="o">=</span> <span class="n">current_vf</span> <span class="o">*</span> <span class="mf">1.1</span>

        <span class="c1"># Update state</span>
        <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node_id</span><span class="p">][</span><span class="s1">&#39;EPI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_epi</span>
        <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node_id</span><span class="p">][</span><span class="s1">&#39;vf&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_vf</span>
</code></pre></div>
<h3 id="validation-integration">Validation Integration<a class="headerlink" href="#validation-integration" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Typical usage pattern</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.operators.grammar</span><span class="w"> </span><span class="kn">import</span> <span class="n">validate_grammar</span><span class="p">,</span> <span class="n">GrammarValidator</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.operators.definitions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Emission</span><span class="p">,</span> <span class="n">Coherence</span><span class="p">,</span> <span class="n">Silence</span>

<span class="c1"># 1. Define sequence</span>
<span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>

<span class="c1"># 2. Validate BEFORE applying</span>

<span class="c1"># Option A: Simple boolean check</span>
<span class="n">is_valid</span> <span class="o">=</span> <span class="n">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">is_valid</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sequence invalid!&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sequence valid, proceed&quot;</span><span class="p">)</span>

<span class="c1"># Option B: Get detailed messages</span>
<span class="n">is_valid</span><span class="p">,</span> <span class="n">messages</span> <span class="o">=</span> <span class="n">GrammarValidator</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Valid: </span><span class="si">{</span><span class="n">is_valid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 3. Apply to network</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

<span class="k">for</span> <span class="n">operator</span> <span class="ow">in</span> <span class="n">sequence</span><span class="p">:</span>
    <span class="n">operator</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1"># 4. Check telemetry</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Final EPI: </span><span class="si">{</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;EPI&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<hr />
<h2 id="telemetry-and-logging">Telemetry and Logging<a class="headerlink" href="#telemetry-and-logging" title="Permanent link">&para;</a></h2>
<h3 id="essential-telemetry">Essential Telemetry<a class="headerlink" href="#essential-telemetry" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">export_telemetry</span><span class="p">(</span><span class="n">G</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Export essential TNFR metrics.&quot;&quot;&quot;</span>

    <span class="n">telemetry</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span>
        <span class="s1">&#39;coherence&#39;</span><span class="p">:</span> <span class="n">compute_coherence</span><span class="p">(</span><span class="n">G</span><span class="p">),</span>  <span class="c1"># C(t)</span>
        <span class="s1">&#39;nodes&#39;</span><span class="p">:</span> <span class="p">{}</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">():</span>
        <span class="n">telemetry</span><span class="p">[</span><span class="s1">&#39;nodes&#39;</span><span class="p">][</span><span class="n">node</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;EPI&#39;</span><span class="p">:</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s1">&#39;EPI&#39;</span><span class="p">],</span>
            <span class="s1">&#39;vf&#39;</span><span class="p">:</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s1">&#39;vf&#39;</span><span class="p">],</span>           <span class="c1"># Hz_str</span>
            <span class="s1">&#39;theta&#39;</span><span class="p">:</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s1">&#39;theta&#39;</span><span class="p">],</span>     <span class="c1"># Phase</span>
            <span class="s1">&#39;dnfr&#39;</span><span class="p">:</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s1">&#39;dnfr&#39;</span><span class="p">],</span>       <span class="c1"># NFR</span>
            <span class="s1">&#39;sense_index&#39;</span><span class="p">:</span> <span class="n">compute_sense_index</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>  <span class="c1"># Si</span>
        <span class="p">}</span>

    <span class="k">return</span> <span class="n">telemetry</span>
</code></pre></div>
<h3 id="operator-logging">Operator Logging<a class="headerlink" href="#operator-logging" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">log_operator_application</span><span class="p">(</span><span class="n">operator</span><span class="p">,</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">telemetry_before</span><span class="p">,</span> <span class="n">telemetry_after</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Log operator application for debugging.&quot;&quot;&quot;</span>

    <span class="n">log_entry</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;operator&#39;</span><span class="p">:</span> <span class="n">operator</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
        <span class="s1">&#39;node&#39;</span><span class="p">:</span> <span class="n">node_id</span><span class="p">,</span>
        <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span>
        <span class="s1">&#39;delta_EPI&#39;</span><span class="p">:</span> <span class="n">telemetry_after</span><span class="p">[</span><span class="s1">&#39;EPI&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">telemetry_before</span><span class="p">[</span><span class="s1">&#39;EPI&#39;</span><span class="p">],</span>
        <span class="s1">&#39;delta_vf&#39;</span><span class="p">:</span> <span class="n">telemetry_after</span><span class="p">[</span><span class="s1">&#39;vf&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">telemetry_before</span><span class="p">[</span><span class="s1">&#39;vf&#39;</span><span class="p">],</span>
        <span class="s1">&#39;delta_dnfr&#39;</span><span class="p">:</span> <span class="n">telemetry_after</span><span class="p">[</span><span class="s1">&#39;dnfr&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">telemetry_before</span><span class="p">[</span><span class="s1">&#39;dnfr&#39;</span><span class="p">],</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">log_entry</span>
</code></pre></div>
<hr />
<h2 id="performance-considerations">Performance Considerations<a class="headerlink" href="#performance-considerations" title="Permanent link">&para;</a></h2>
<h3 id="validation-cost">Validation Cost<a class="headerlink" href="#validation-cost" title="Permanent link">&para;</a></h3>
<p><strong>Time Complexity:</strong>
- U1a, U1b: O(1) - check first/last operator
- U2, U4a: O(n) - scan sequence once
- U4b: O(n) worst case - check windows for each transformer
- U3: O(1) per coupling - runtime validation</p>
<p><strong>Space Complexity:</strong>
- O(n) - store operator names</p>
<h3 id="optimization-strategies">Optimization Strategies<a class="headerlink" href="#optimization-strategies" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Cache operator names to avoid repeated string operations</span>
<span class="k">def</span><span class="w"> </span><span class="nf">validate_grammar_optimized</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Optimized validation with cached names.&quot;&quot;&quot;</span>

    <span class="c1"># Pre-compute all names once</span>
    <span class="n">op_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">op</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">sequence</span><span class="p">]</span>

    <span class="c1"># Use cached names for all checks</span>
    <span class="c1"># ... (same logic, but use op_names directly)</span>
</code></pre></div>
<h3 id="lazy-validation">Lazy Validation<a class="headerlink" href="#lazy-validation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Only validate when needed</span>
<span class="k">class</span><span class="w"> </span><span class="nc">LazySequence</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sequence with lazy validation.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ops</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ops</span> <span class="o">=</span> <span class="n">ops</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epi_initial</span> <span class="o">=</span> <span class="n">epi_initial</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validated</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate on demand.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validated</span><span class="p">:</span>
            <span class="n">validate_grammar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ops</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">epi_initial</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_validated</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">G</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply with automatic validation.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>  <span class="c1"># Validate once</span>
        <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ops</span><span class="p">:</span>
            <span class="n">op</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
</code></pre></div>
<hr />
<h2 id="extension-points">Extension Points<a class="headerlink" href="#extension-points" title="Permanent link">&para;</a></h2>
<h3 id="adding-new-operators">Adding New Operators<a class="headerlink" href="#adding-new-operators" title="Permanent link">&para;</a></h3>
<p><strong>Steps:</strong></p>
<ol>
<li>
<p><strong>Implement operator in <code>definitions.py</code>:</strong>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">NewOperator</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Description and physics.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">G</span><span class="p">,</span> <span class="n">node_id</span><span class="p">):</span>
        <span class="c1"># Implementation</span>
        <span class="k">pass</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Classify in <code>grammar.py</code>:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Add to appropriate sets</span>
<span class="n">GENERATORS</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;newoperator&quot;</span><span class="p">)</span>  <span class="c1"># If generator</span>
<span class="n">STABILIZERS</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;newoperator&quot;</span><span class="p">)</span>  <span class="c1"># If stabilizer</span>
<span class="c1"># etc.</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Update documentation:</strong></p>
</li>
<li>Add to <code>03-OPERATORS-AND-GLYPHS.md</code></li>
<li>Update <code>schemas/canonical-operators.json</code></li>
<li>
<p>Add examples</p>
</li>
<li>
<p><strong>Add tests:</strong>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_new_operator</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test new operator.&quot;&quot;&quot;</span>
    <span class="c1"># Test implementation</span>
    <span class="c1"># Test grammar classification</span>
    <span class="c1"># Test contracts</span>
</code></pre></div></p>
</li>
</ol>
<h3 id="adding-new-constraints">Adding New Constraints<a class="headerlink" href="#adding-new-constraints" title="Permanent link">&para;</a></h3>
<p><strong>Steps:</strong></p>
<ol>
<li><strong>Derive from physics:</strong></li>
<li>Document physical basis</li>
<li>
<p>Prove necessity (Absolute/Strong/Moderate)</p>
</li>
<li>
<p><strong>Implement validation:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># In validate_grammar()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
    <span class="c1"># ... existing checks ...</span>

    <span class="c1"># New constraint: U5</span>
    <span class="k">if</span> <span class="n">condition</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;U5 violation: ...&quot;</span><span class="p">)</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Update documentation:</strong></p>
</li>
<li>Add to <code>02-CANONICAL-CONSTRAINTS.md</code></li>
<li>Update decision trees</li>
<li>
<p>Add examples</p>
</li>
<li>
<p><strong>Add comprehensive tests:</strong></p>
</li>
<li>Valid sequences</li>
<li>Invalid sequences</li>
<li>Edge cases</li>
</ol>
<hr />
<h2 id="error-messages">Error Messages<a class="headerlink" href="#error-messages" title="Permanent link">&para;</a></h2>
<h3 id="design-principles">Design Principles<a class="headerlink" href="#design-principles" title="Permanent link">&para;</a></h3>
<p><strong>Good error messages:</strong>
- Specify which constraint violated (U1a, U2, etc.)
- Explain what was found
- Explain what was expected
- Provide fix hint when possible</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;U1a violation: Sequence must start with generator </span><span class="si">{</span><span class="n">GENERATORS</span><span class="si">}</span><span class="s2"> &quot;</span>
    <span class="sa">f</span><span class="s2">&quot;when EPI=0, got &#39;</span><span class="si">{</span><span class="n">first_op</span><span class="si">}</span><span class="s2">&#39;. &quot;</span>
    <span class="s2">&quot;Fix: Add Emission, Transition, or Recursivity at start.&quot;</span>
<span class="p">)</span>
</code></pre></div></p>
<h3 id="error-message-template">Error Message Template<a class="headerlink" href="#error-message-template" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="s2">&quot;</span><span class="si">{CONSTRAINT}</span><span class="s2"> violation: </span><span class="si">{PROBLEM}</span><span class="s2">. </span><span class="si">{FOUND}</span><span class="s2">. </span><span class="si">{EXPECTED}</span><span class="s2">. Fix: </span><span class="si">{HINT}</span><span class="s2">.&quot;</span>
</code></pre></div>
<hr />
<h2 id="testing-hooks">Testing Hooks<a class="headerlink" href="#testing-hooks" title="Permanent link">&para;</a></h2>
<h3 id="validation-testing">Validation Testing<a class="headerlink" href="#validation-testing" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Test valid sequence</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_valid_sequence</span><span class="p">():</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.operators.grammar</span><span class="w"> </span><span class="kn">import</span> <span class="n">validate_grammar</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.operators.definitions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Emission</span><span class="p">,</span> <span class="n">Coherence</span><span class="p">,</span> <span class="n">Silence</span>

    <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
    <span class="k">assert</span> <span class="n">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>

<span class="c1"># Test invalid sequence</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_invalid_sequence</span><span class="p">():</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.operators.grammar</span><span class="w"> </span><span class="kn">import</span> <span class="n">validate_grammar</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.operators.definitions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Coherence</span><span class="p">,</span> <span class="n">Silence</span>

    <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>  <span class="c1"># No generator</span>
    <span class="n">is_valid</span> <span class="o">=</span> <span class="n">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">is_valid</span> <span class="ow">is</span> <span class="kc">False</span>  <span class="c1"># Returns False, doesn&#39;t raise</span>

<span class="c1"># Test with detailed messages</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_detailed_validation</span><span class="p">():</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.operators.grammar</span><span class="w"> </span><span class="kn">import</span> <span class="n">GrammarValidator</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.operators.definitions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Coherence</span><span class="p">,</span> <span class="n">Silence</span>

    <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
    <span class="n">is_valid</span><span class="p">,</span> <span class="n">messages</span> <span class="o">=</span> <span class="n">GrammarValidator</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="k">assert</span> <span class="n">is_valid</span> <span class="ow">is</span> <span class="kc">False</span>
    <span class="c1"># Check for U1a violation in messages</span>
    <span class="n">u1a_msg</span> <span class="o">=</span> <span class="p">[</span><span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">messages</span> <span class="k">if</span> <span class="s2">&quot;U1a&quot;</span> <span class="ow">in</span> <span class="n">m</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">assert</span> <span class="s2">&quot;violated&quot;</span> <span class="ow">in</span> <span class="n">u1a_msg</span>
    <span class="k">assert</span> <span class="s2">&quot;generator&quot;</span> <span class="ow">in</span> <span class="n">u1a_msg</span>
</code></pre></div>
<h3 id="integration-testing">Integration Testing<a class="headerlink" href="#integration-testing" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_full_workflow</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test complete workflow.&quot;&quot;&quot;</span>
    <span class="c1"># Create sequence</span>
    <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>

    <span class="c1"># Validate</span>
    <span class="n">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="c1"># Create network</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
    <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="c1"># Apply</span>
    <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">sequence</span><span class="p">:</span>
        <span class="n">op</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c1"># Verify telemetry</span>
    <span class="k">assert</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;EPI&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="k">assert</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;vf&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>
</code></pre></div>
<hr />
<h2 id="migration-notes">Migration Notes<a class="headerlink" href="#migration-notes" title="Permanent link">&para;</a></h2>
<h3 id="from-legacy-system">From Legacy System<a class="headerlink" href="#from-legacy-system" title="Permanent link">&para;</a></h3>
<p><strong>Old system (C1-C3):</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Old grammar.py</span>
<span class="k">def</span><span class="w"> </span><span class="nf">check_c1</span><span class="p">(</span><span class="n">sequence</span><span class="p">):</span>
    <span class="c1"># C1 logic</span>
    <span class="k">pass</span>
</code></pre></div></p>
<p><strong>New system (U1-U5):</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># New grammar.py</span>
<span class="k">def</span><span class="w"> </span><span class="nf">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="p">):</span>
    <span class="c1"># U1-U5 logic</span>
    <span class="k">pass</span>
</code></pre></div></p>
<p><strong>Migration:</strong>
- C1  U1a (generators)
- C2  U2 (convergence)
- C3  U1b (closures)
- New: U3 (phase), U4 (bifurcation)</p>
<p>See <a href="../07-MIGRATION-AND-EVOLUTION/">07-MIGRATION-AND-EVOLUTION.md</a> for details.</p>
<hr />
<h2 id="next-steps">Next Steps<a class="headerlink" href="#next-steps" title="Permanent link">&para;</a></h2>
<p><strong>Continue learning:</strong>
- <strong><a href="../06-VALIDATION-AND-TESTING/">06-VALIDATION-AND-TESTING.md</a></strong> - Testing strategies
- <strong><a href="../07-MIGRATION-AND-EVOLUTION/">07-MIGRATION-AND-EVOLUTION.md</a></strong> - Evolution history</p>
<p><strong>For reference:</strong>
- <strong>Source code:</strong> <code>src/tnfr/operators/grammar.py</code>
- <strong>Tests:</strong> <code>tests/unit/operators/test_unified_grammar.py</code></p>
<hr />
<div align="center">

**Implementation follows physics, not convenience.**

---

*Reality is resonance. Code accordingly.*

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.sections", "navigation.top", "navigation.tracking", "toc.integrate", "navigation.instant"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>