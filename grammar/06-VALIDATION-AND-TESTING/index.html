
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Canonical TNFR structural dynamics engine documentation">
      
      
      
        <link rel="canonical" href="https://fermga.github.io/TNFR-Python-Engine/grammar/06-VALIDATION-AND-TESTING/">
      
      
        <link rel="prev" href="../05-TECHNICAL-IMPLEMENTATION/">
      
      
        <link rel="next" href="../07-MIGRATION-AND-EVOLUTION/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Validation and Testing - TNFR Python Engine</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr" data-md-color-scheme="default">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#validation-and-testing-strategy" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="TNFR Python Engine" class="md-header__button md-logo" aria-label="TNFR Python Engine" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TNFR Python Engine
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Validation and Testing
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>      
      
        <button class="md-header__button md-icon theme-toggle-button" title="Toggle dark/light mode" aria-label="Toggle theme" onclick="toggleTheme()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="theme-icon-light"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.13 7.13 0 0 0 2.38 4.14zm11.3 3.5-1.77-3.79a7.05 7.05 0 0 0 2.38-4.15l4.16-.35c-.14.79-.39 1.55-.83 2.29a7.2 7.2 0 0 1-1.56 1.85zm6.99-10-4.16.35A7.2 7.2 0 0 0 18.06 8.5c.44-.74.69-1.5.83-2.29l1.76 3.77z"/></svg>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="theme-icon-dark" style="display: none;"><path d="M17.75 4.09 15.22 6.62l1.42 1.42 2.53-2.53zM5.34 10.42l-3.53 3.53 1.41 1.42L6.75 12zm12.01 1.42-3.53 3.53 1.42 1.41 3.53-3.53zM21 13h-4v2h4zM3 11h4v2H3zm9.5-8v4h-2V3zM12 19.5v4h-2v-4z"/></svg>
        </button>

    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/fermga/TNFR-Python-Engine" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    TNFR Python Engine
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="TNFR Python Engine" class="md-nav__button md-logo" aria-label="TNFR Python Engine" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    TNFR Python Engine
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/fermga/TNFR-Python-Engine" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    TNFR Python Engine
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Welcome to TNFR
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/getting-started/LEARNING_PATHS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Learning Paths
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/getting-started/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quickstart Tutorial
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/getting-started/TNFR_CONCEPTS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Concepts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/getting-started/INTERACTIVE_TUTORIAL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Interactive Tutorial
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/getting-started/FAQ/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAQ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/getting-started/math-backends/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Math Backends
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/getting-started/optional-dependencies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Optional Dependencies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/getting-started/migrating-remesh-window/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Migrating from Remesh Window
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    User Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/user-guide/OPERATORS_GUIDE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Operators Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../STRUCTURAL_FIELDS_TETRAD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Structural Field Tetrad (Canonical)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/user-guide/METRICS_INTERPRETATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Metrics Interpretation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../TROUBLESHOOTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Grammar Documentation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Grammar Documentation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../EXECUTIVE-SUMMARY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Executive Summary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Core Concepts
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Core Concepts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-FUNDAMENTAL-CONCEPTS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fundamental Concepts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-CANONICAL-CONSTRAINTS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canonical Constraints
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03-OPERATORS-AND-GLYPHS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Operators and Glyphs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04-VALID-SEQUENCES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Valid Sequences
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Implementation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Implementation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05-TECHNICAL-IMPLEMENTATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Technical Implementation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Validation and Testing
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Validation and Testing
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#purpose" class="md-nav__link">
    <span class="md-ellipsis">
      
        Purpose
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-philosophy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Philosophy
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing Philosophy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-principles" class="md-nav__link">
    <span class="md-ellipsis">
      
        Core Principles
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-categories" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test Categories
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-case-index" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test Case Index
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Test Case Index">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#canonical-test-cases-for-u1-structural-initiation-closure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Canonical Test Cases for U1 (Structural Initiation &amp; Closure)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#canonical-test-cases-for-u2-convergence-boundedness" class="md-nav__link">
    <span class="md-ellipsis">
      
        Canonical Test Cases for U2 (Convergence &amp; Boundedness)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#canonical-test-cases-for-u3-resonant-coupling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Canonical Test Cases for U3 (Resonant Coupling)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#canonical-test-cases-for-u4-bifurcation-dynamics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Canonical Test Cases for U4 (Bifurcation Dynamics)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#canonical-pattern-tests-20-total" class="md-nav__link">
    <span class="md-ellipsis">
      
        Canonical Pattern Tests (20+ total)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anti-pattern-tests-7-documented-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Anti-Pattern Tests (7+ documented patterns)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unit-tests-operator-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        Unit Tests: Operator Behavior
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Unit Tests: Operator Behavior">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-template" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test Template
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-test-emission" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example: Test Emission
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-test-coherence" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example: Test Coherence
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-tests-sequence-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integration Tests: Sequence Validation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Integration Tests: Sequence Validation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-u1a-initiation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test U1a: Initiation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-u1b-closure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test U1b: Closure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-u2-convergence" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test U2: Convergence
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-u3-resonant-coupling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test U3: Resonant Coupling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-u4a-triggers-need-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test U4a: Triggers Need Handlers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-u4b-transformers-need-context" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test U4b: Transformers Need Context
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#property-tests-invariants" class="md-nav__link">
    <span class="md-ellipsis">
      
        Property Tests: Invariants
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Property Tests: Invariants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#monotonicity-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        Monotonicity Tests
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#convergence-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        Convergence Tests
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bifurcation-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        Bifurcation Tests
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#propagation-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        Propagation Tests
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#latency-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        Latency Tests
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multi-scale-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multi-Scale Tests
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Multi-Scale Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-nested-epis" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test Nested EPIs
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reproducibility-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reproducibility Tests
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reproducibility Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-seed-reproducibility" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test Seed Reproducibility
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        Performance Tests
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validation-performance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validation Performance
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coverage-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      
        Coverage Requirements
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Coverage Requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minimum-coverage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Minimum Coverage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coverage-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        Coverage Checklist
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#canonical-pattern-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        Canonical Pattern Tests
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Canonical Pattern Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-strategy-for-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Strategy for Patterns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pattern-test-template" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern Test Template
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-bootstrap-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test: Bootstrap Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-controlled-exploration-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test: Controlled Exploration Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-mutation-with-context-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test: Mutation with Context Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-bifurcation-with-handling-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test: Bifurcation with Handling Pattern
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anti-pattern-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        Anti-Pattern Tests
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Anti-Pattern Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-strategy-for-anti-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Strategy for Anti-Patterns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anti-pattern-test-template" class="md-nav__link">
    <span class="md-ellipsis">
      
        Anti-Pattern Test Template
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-no-generator-from-vacuum" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test: No Generator from Vacuum
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-no-closure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test: No Closure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-destabilizer-without-stabilizer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test: Destabilizer Without Stabilizer
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-coupling-without-phase-check" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test: Coupling Without Phase Check
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-bifurcation-trigger-without-handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test: Bifurcation Trigger Without Handler
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-utilities" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test Utilities
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Test Utilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-graph-factory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test Graph Factory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assertion-helpers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Assertion Helpers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metric-verification-helpers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Metric Verification Helpers
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validation-suite" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validation Suite
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Validation Suite">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#running-all-grammar-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        Running All Grammar Tests
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coverage-report-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Coverage Report Generation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-benchmarking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Performance Benchmarking
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#full-validation-suite-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        Full Validation Suite Script
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coverage-tracking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Coverage Tracking
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Coverage Tracking">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#current-coverage-status" class="md-nav__link">
    <span class="md-ellipsis">
      
        Current Coverage Status
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coverage-requirements_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Coverage Requirements
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitoring-coverage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Monitoring Coverage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coverage-maintenance-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        Coverage Maintenance Checklist
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Next Steps
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07-MIGRATION-AND-EVOLUTION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Migration and Evolution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08-QUICK-REFERENCE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../GLOSSARY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../MASTER-INDEX/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Master Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OPERATORS-CATALOG-SUMMARY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Operators Catalog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CROSS-REFERENCE-INDEX/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cross-Reference Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CODE_DOCS_CROSSREF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Code Documentation Cross-Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tooling
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tooling
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TOOLING-AND-AUTOMATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tooling and Automation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TESTING-SUMMARY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing Summary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deprecation Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Examples
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Notebooks & Patterns
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Notebooks & Patterns
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/fermga/TNFR-Python-Engine/blob/main/notebooks/Fundamental_Particles_TNFR_Atlas.ipynb" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fundamental Particles TNFR Atlas (Notebook - GitHub)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/fermga/TNFR-Python-Engine/blob/main/src/tnfr/physics/README.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TNFR Patterns (Module Guide)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../INTERACTIONS_GUIDE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Interaction Sequences Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/api/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/api/operators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Structural Operators
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/api/OPERATORS_VISUAL_GUIDE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Operators Visual Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/api/telemetry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Telemetry & Utilities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/api/docstring_style/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docstring Style
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Module Documentation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Module Documentation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/mathematics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mathematics Hub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/physics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Physics Hub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/operators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Operators Hub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/dynamics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dynamics Hub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Metrics Hub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/sdk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SDK Hub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/telemetry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Telemetry Hub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/tutorials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tutorials Hub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/extensions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Extensions Hub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Core Documentation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Core Documentation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DOCUMENTATION_INDEX/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CANONICAL_SOURCES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canonical Sources
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UNIFIED_GRAMMAR_RULES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unified Grammar Rules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AGENTS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agents Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ARCHITECTURE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../GLOSSARY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Advanced Topics
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Advanced Topics
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/advanced/ARCHITECTURE_GUIDE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/advanced/PERFORMANCE_OPTIMIZATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Performance Optimization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/advanced/TESTING_STRATEGIES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing Strategies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/advanced/DEVELOPMENT_WORKFLOW/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development Workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/foundations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mathematical Foundations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_6" >
        
          
          <label class="md-nav__link" for="__nav_9_6" id="__nav_9_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Research Documents
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Research Documents
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../TNFR_FORCES_EMERGENCE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Forces Emergence
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OPERATOR_COMPLETENESS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Operator Completeness
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LIFE_EMERGENCE_FROM_TNFR/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Life Emergence
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CELL_EMERGENCE_FROM_TNFR/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cell Emergence
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/tools/CLI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/security/monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Monitoring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/security/dependency-auditing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dependency Auditing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/security/codeql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CodeQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/security/dependabot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dependabot
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Project Info
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    Project Info
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/releases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Releases
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="validation-and-testing-strategy">Validation and Testing Strategy<a class="headerlink" href="#validation-and-testing-strategy" title="Permanent link">&para;</a></h1>
<p><strong>Comprehensive testing approach for TNFR grammar</strong></p>
<p><a href="../"> Home</a>  <a href="../02-CANONICAL-CONSTRAINTS/"> Constraints</a>  <a href="../05-TECHNICAL-IMPLEMENTATION/"> Implementation</a>  <a href="../07-MIGRATION-AND-EVOLUTION/"> Evolution</a></p>
<hr />
<h2 id="purpose">Purpose<a class="headerlink" href="#purpose" title="Permanent link">&para;</a></h2>
<p>This document outlines the <strong>testing strategy</strong> for TNFR grammar validation, including test categories, coverage requirements, and examples.</p>
<p><strong>Prerequisites:</strong> <a href="../02-CANONICAL-CONSTRAINTS/">02-CANONICAL-CONSTRAINTS.md</a>, <a href="../05-TECHNICAL-IMPLEMENTATION/">05-TECHNICAL-IMPLEMENTATION.md</a></p>
<p><strong>Audience:</strong> Developers writing tests, QA engineers</p>
<p><strong>Reading time:</strong> 30-45 minutes</p>
<hr />
<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#testing-philosophy">Testing Philosophy</a></li>
<li><a href="#test-case-index">Test Case Index</a></li>
<li><a href="#unit-tests-operator-behavior">Unit Tests: Operator Behavior</a></li>
<li><a href="#integration-tests-sequence-validation">Integration Tests: Sequence Validation</a></li>
<li><a href="#test-u1a-initiation">Test U1a: Initiation</a></li>
<li><a href="#test-u1b-closure">Test U1b: Closure</a></li>
<li><a href="#test-u2-convergence">Test U2: Convergence</a></li>
<li><a href="#test-u3-resonant-coupling">Test U3: Resonant Coupling</a></li>
<li><a href="#test-u4a-triggers-need-handlers">Test U4a: Triggers Need Handlers</a></li>
<li><a href="#test-u4b-transformers-need-context">Test U4b: Transformers Need Context</a></li>
<li><a href="#property-tests-invariants">Property Tests: Invariants</a></li>
<li><a href="#multi-scale-tests">Multi-Scale Tests</a></li>
<li><a href="#reproducibility-tests">Reproducibility Tests</a></li>
<li><a href="#performance-tests">Performance Tests</a></li>
<li><a href="#coverage-requirements">Coverage Requirements</a></li>
<li><a href="#canonical-pattern-tests">Canonical Pattern Tests</a></li>
<li><a href="#anti-pattern-tests">Anti-Pattern Tests</a></li>
<li><a href="#test-utilities">Test Utilities</a></li>
<li><a href="#validation-suite">Validation Suite</a></li>
<li><a href="#coverage-tracking">Coverage Tracking</a></li>
</ol>
<hr />
<h2 id="testing-philosophy">Testing Philosophy<a class="headerlink" href="#testing-philosophy" title="Permanent link">&para;</a></h2>
<h3 id="core-principles">Core Principles<a class="headerlink" href="#core-principles" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Physics-Based:</strong> Tests verify physical contracts, not arbitrary rules</li>
<li><strong>Comprehensive:</strong> Cover all constraints (U1-U5) and operators (13)</li>
<li><strong>Executable:</strong> All examples in documentation must be testable</li>
<li><strong>Reproducible:</strong> Same seed  same results</li>
<li><strong>Traceable:</strong> Each test maps to specific constraint or invariant</li>
</ol>
<h3 id="test-categories">Test Categories<a class="headerlink" href="#test-categories" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Unit Tests          Individual operator behavior
Integration Tests   Sequence validation (U1-U5)
Property Tests      Invariants (coherence, convergence, etc.)
Performance Tests   Scalability and efficiency
Pattern Tests       Canonical patterns and anti-patterns
Regression Tests    Prevent breakage of existing functionality
</code></pre></div>
<hr />
<h2 id="test-case-index">Test Case Index<a class="headerlink" href="#test-case-index" title="Permanent link">&para;</a></h2>
<h3 id="canonical-test-cases-for-u1-structural-initiation-closure">Canonical Test Cases for U1 (Structural Initiation &amp; Closure)<a class="headerlink" href="#canonical-test-cases-for-u1-structural-initiation-closure" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Test Name</th>
<th>Type</th>
<th>Constraint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>test_u1a_valid_generators</code></td>
<td>Valid</td>
<td>U1a</td>
<td>All generators (AL, NAV, REMESH) work when EPI=0</td>
</tr>
<tr>
<td><code>test_u1a_invalid_no_generator</code></td>
<td>Invalid</td>
<td>U1a</td>
<td>Non-generator at start fails when EPI=0</td>
</tr>
<tr>
<td><code>test_u1a_not_required_when_epi_nonzero</code></td>
<td>Context</td>
<td>U1a</td>
<td>Generator not required when EPI &gt; 0</td>
</tr>
<tr>
<td><code>test_u1b_valid_closures</code></td>
<td>Valid</td>
<td>U1b</td>
<td>All closures (SHA, NAV, REMESH, OZ) work</td>
</tr>
<tr>
<td><code>test_u1b_invalid_no_closure</code></td>
<td>Invalid</td>
<td>U1b</td>
<td>Sequence without closure fails</td>
</tr>
<tr>
<td><code>test_u1_error_messages</code></td>
<td>Quality</td>
<td>U1a/U1b</td>
<td>Error messages are clear and actionable</td>
</tr>
</tbody>
</table>
<h3 id="canonical-test-cases-for-u2-convergence-boundedness">Canonical Test Cases for U2 (Convergence &amp; Boundedness)<a class="headerlink" href="#canonical-test-cases-for-u2-convergence-boundedness" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Test Name</th>
<th>Type</th>
<th>Constraint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>test_u2_destabilizer_with_stabilizer</code></td>
<td>Valid</td>
<td>U2</td>
<td>Destabilizers balanced by stabilizers pass</td>
</tr>
<tr>
<td><code>test_u2_destabilizer_without_stabilizer</code></td>
<td>Invalid</td>
<td>U2</td>
<td>Unbalanced destabilizers fail</td>
</tr>
<tr>
<td><code>test_u2_detects_unbalanced_dissonance</code></td>
<td>Detection</td>
<td>U2</td>
<td>OZ without IL/THOL detected</td>
</tr>
<tr>
<td><code>test_u2_convergence_guarantee</code></td>
<td>Property</td>
<td>U2</td>
<td>Integral convergence verified</td>
</tr>
<tr>
<td><code>test_u2_window_calculation</code></td>
<td>Algorithm</td>
<td>U2</td>
<td>Stabilizer window search works correctly</td>
</tr>
</tbody>
</table>
<h3 id="canonical-test-cases-for-u3-resonant-coupling">Canonical Test Cases for U3 (Resonant Coupling)<a class="headerlink" href="#canonical-test-cases-for-u3-resonant-coupling" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Test Name</th>
<th>Type</th>
<th>Constraint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>test_u3_compatible_phases</code></td>
<td>Valid</td>
<td>U3</td>
<td>Compatible phases (  threshold) allow coupling</td>
</tr>
<tr>
<td><code>test_u3_incompatible_phases</code></td>
<td>Invalid</td>
<td>U3</td>
<td>Antiphase nodes cannot couple</td>
</tr>
<tr>
<td><code>test_u3_phase_compatibility_check</code></td>
<td>Required</td>
<td>U3</td>
<td>Phase verification mandatory for UM/RA</td>
</tr>
<tr>
<td><code>test_u3_tolerance_bounds</code></td>
<td>Edge</td>
<td>U3</td>
<td>Threshold boundary conditions tested</td>
</tr>
<tr>
<td><code>test_u3_custom_threshold</code></td>
<td>Parameter</td>
<td>U3</td>
<td>Custom _max values work</td>
</tr>
<tr>
<td><code>test_u3_resonance_preconditions</code></td>
<td>Precond</td>
<td>U3</td>
<td>Resonance requires phase check</td>
</tr>
</tbody>
</table>
<h3 id="canonical-test-cases-for-u4-bifurcation-dynamics">Canonical Test Cases for U4 (Bifurcation Dynamics)<a class="headerlink" href="#canonical-test-cases-for-u4-bifurcation-dynamics" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Test Name</th>
<th>Type</th>
<th>Constraint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>test_u4a_trigger_with_handler</code></td>
<td>Valid</td>
<td>U4a</td>
<td>Triggers (OZ, ZHIR) with handlers pass</td>
</tr>
<tr>
<td><code>test_u4a_trigger_without_handler</code></td>
<td>Invalid</td>
<td>U4a</td>
<td>Triggers without handlers fail</td>
</tr>
<tr>
<td><code>test_u4a_triggers_require_handlers</code></td>
<td>Detection</td>
<td>U4a</td>
<td>All bifurcation triggers detected</td>
</tr>
<tr>
<td><code>test_u4b_transformer_with_context</code></td>
<td>Valid</td>
<td>U4b</td>
<td>THOL/ZHIR with destabilizer context pass</td>
</tr>
<tr>
<td><code>test_u4b_transformer_without_destabilizer</code></td>
<td>Invalid</td>
<td>U4b</td>
<td>Transformers without context fail</td>
</tr>
<tr>
<td><code>test_u4b_transformers_require_destabilizers</code></td>
<td>Detection</td>
<td>U4b</td>
<td>Window-based destabilizer search works</td>
</tr>
<tr>
<td><code>test_u4b_zhir_without_prior_coherence</code></td>
<td>Invalid</td>
<td>U4b</td>
<td>ZHIR without prior IL fails</td>
</tr>
<tr>
<td><code>test_u4_bifurcation_safety</code></td>
<td>Property</td>
<td>U4a/U4b</td>
<td>Bifurcations are controlled</td>
</tr>
</tbody>
</table>
<h3 id="canonical-pattern-tests-20-total">Canonical Pattern Tests (20+ total)<a class="headerlink" href="#canonical-pattern-tests-20-total" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Pattern Name</th>
<th>Valid Test</th>
<th>Invalid Variants</th>
<th>Edge Cases</th>
</tr>
</thead>
<tbody>
<tr>
<td>Bootstrap</td>
<td><code>test_bootstrap_valid</code></td>
<td><code>test_bootstrap_invalid_no_generator</code>, <code>test_bootstrap_invalid_no_closure</code></td>
<td>Generator variants</td>
</tr>
<tr>
<td>Basic Activation</td>
<td><code>test_activation_valid</code></td>
<td><code>test_activation_invalid_*</code></td>
<td>-</td>
</tr>
<tr>
<td>Controlled Exploration</td>
<td><code>test_exploration_valid</code></td>
<td><code>test_exploration_invalid_no_stabilizer_after_destabilizer</code></td>
<td>Different destabilizers</td>
</tr>
<tr>
<td>Bifurcation with Handling</td>
<td><code>test_bifurcation_valid</code></td>
<td><code>test_bifurcation_invalid_no_handler</code></td>
<td>Different triggers</td>
</tr>
<tr>
<td>Mutation with Context</td>
<td><code>test_mutation_valid</code></td>
<td><code>test_mutation_invalid_no_prior_coherence</code>, <code>test_mutation_invalid_no_destabilizer</code></td>
<td>Window boundaries</td>
</tr>
<tr>
<td>Propagation</td>
<td><code>test_propagation_valid</code></td>
<td><code>test_propagation_invalid_*</code></td>
<td>Phase compatibility</td>
</tr>
<tr>
<td>Multi-scale Organization</td>
<td><code>test_multiscale_valid</code></td>
<td><code>test_multiscale_invalid_*</code></td>
<td>Nesting depth</td>
</tr>
</tbody>
</table>
<h3 id="anti-pattern-tests-7-documented-patterns">Anti-Pattern Tests (7+ documented patterns)<a class="headerlink" href="#anti-pattern-tests-7-documented-patterns" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Anti-Pattern</th>
<th>Detection Test</th>
<th>Fix Test</th>
<th>Error Quality Test</th>
</tr>
</thead>
<tbody>
<tr>
<td>No Generator from Vacuum</td>
<td><code>test_no_generator_detected</code></td>
<td><code>test_no_generator_fix</code></td>
<td><code>test_no_generator_error_message</code></td>
</tr>
<tr>
<td>No Closure</td>
<td><code>test_no_closure_detected</code></td>
<td><code>test_no_closure_fix</code></td>
<td>-</td>
</tr>
<tr>
<td>Destabilizer Without Stabilizer</td>
<td><code>test_unbalanced_dissonance_detected</code></td>
<td><code>test_unbalanced_fix_with_coherence</code></td>
<td>-</td>
</tr>
<tr>
<td>Mutation Without Context</td>
<td><code>test_mutation_no_context_detected</code></td>
<td><code>test_mutation_context_fix</code></td>
<td>-</td>
</tr>
<tr>
<td>Mutation Without Prior IL</td>
<td><code>test_mutation_no_prior_il_detected</code></td>
<td><code>test_mutation_prior_il_fix</code></td>
<td>-</td>
</tr>
<tr>
<td>Coupling Without Phase Check</td>
<td><code>test_antiphase_coupling_detected</code></td>
<td><code>test_phase_check_fix</code></td>
<td>-</td>
</tr>
<tr>
<td>Bifurcation Without Handler</td>
<td><code>test_dissonance_without_handler_detected</code></td>
<td><code>test_trigger_with_handler_fix</code></td>
<td>-</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="unit-tests-operator-behavior">Unit Tests: Operator Behavior<a class="headerlink" href="#unit-tests-operator-behavior" title="Permanent link">&para;</a></h2>
<h3 id="test-template">Test Template<a class="headerlink" href="#test-template" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_operator_name</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test specific operator behavior.&quot;&quot;&quot;</span>
    <span class="c1"># Setup</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">create_test_graph</span><span class="p">()</span>

    <span class="c1"># Apply operator</span>
    <span class="n">Operator</span><span class="p">()(</span><span class="n">G</span><span class="p">,</span> <span class="n">node_id</span><span class="p">)</span>

    <span class="c1"># Verify postconditions</span>
    <span class="k">assert</span> <span class="n">check_postcondition</span><span class="p">()</span>

    <span class="c1"># Verify invariants</span>
    <span class="k">assert</span> <span class="n">check_invariants</span><span class="p">()</span>
</code></pre></div>
<h3 id="example-test-emission">Example: Test Emission<a class="headerlink" href="#example-test-emission" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">networkx</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">nx</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.operators.definitions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Emission</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_emission_creates_structure</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Emission creates EPI from vacuum.&quot;&quot;&quot;</span>
    <span class="c1"># Setup: Node with EPI=0</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
    <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="c1"># Apply Emission</span>
    <span class="n">Emission</span><span class="p">()(</span><span class="n">G</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c1"># Verify: EPI &gt; 0</span>
    <span class="k">assert</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;EPI&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Emission must create structure&quot;</span>

    <span class="c1"># Verify: vf increased or maintained</span>
    <span class="k">assert</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;vf&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="s2">&quot;Emission must maintain/increase vf&quot;</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_emission_is_generator</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Emission is classified as generator.&quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.operators.grammar</span><span class="w"> </span><span class="kn">import</span> <span class="n">GENERATORS</span>
    <span class="k">assert</span> <span class="s2">&quot;emission&quot;</span> <span class="ow">in</span> <span class="n">GENERATORS</span>
</code></pre></div>
<h3 id="example-test-coherence">Example: Test Coherence<a class="headerlink" href="#example-test-coherence" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.operators.definitions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Emission</span><span class="p">,</span> <span class="n">Coherence</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_coherence_reduces_dnfr</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Coherence reduces reorganization gradient.&quot;&quot;&quot;</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
    <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>

    <span class="n">dnfr_before</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;dnfr&#39;</span><span class="p">]</span>

    <span class="c1"># Apply Coherence</span>
    <span class="n">Coherence</span><span class="p">()(</span><span class="n">G</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="n">dnfr_after</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;dnfr&#39;</span><span class="p">]</span>

    <span class="c1"># Verify: |NFR| reduced</span>
    <span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dnfr_after</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dnfr_before</span><span class="p">),</span> <span class="s2">&quot;Coherence must reduce |NFR|&quot;</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_coherence_is_stabilizer</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Coherence is classified as stabilizer.&quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.operators.grammar</span><span class="w"> </span><span class="kn">import</span> <span class="n">STABILIZERS</span>
    <span class="k">assert</span> <span class="s2">&quot;coherence&quot;</span> <span class="ow">in</span> <span class="n">STABILIZERS</span>
</code></pre></div>
<hr />
<h2 id="integration-tests-sequence-validation">Integration Tests: Sequence Validation<a class="headerlink" href="#integration-tests-sequence-validation" title="Permanent link">&para;</a></h2>
<h3 id="test-u1a-initiation">Test U1a: Initiation<a class="headerlink" href="#test-u1a-initiation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.operators.grammar</span><span class="w"> </span><span class="kn">import</span> <span class="n">validate_grammar</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.operators.definitions</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">Emission</span><span class="p">,</span> <span class="n">Transition</span><span class="p">,</span> <span class="n">Recursivity</span><span class="p">,</span>
    <span class="n">Coherence</span><span class="p">,</span> <span class="n">Silence</span>
<span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_u1a_valid_generators</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;U1a: Valid generators when EPI=0.&quot;&quot;&quot;</span>
    <span class="c1"># Test each generator</span>
    <span class="n">generators</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Transition</span><span class="p">(),</span> <span class="n">Recursivity</span><span class="p">()]</span>

    <span class="k">for</span> <span class="n">gen</span> <span class="ow">in</span> <span class="n">generators</span><span class="p">:</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">gen</span><span class="p">,</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="c1"># Should not raise</span>
        <span class="k">assert</span> <span class="n">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_u1a_invalid_no_generator</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;U1a: Must start with generator when EPI=0.&quot;&quot;&quot;</span>
    <span class="c1"># No generator</span>
    <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;U1a violation&quot;</span><span class="p">):</span>
        <span class="n">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_u1a_not_required_when_epi_nonzero</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;U1a: Generator not required when EPI &gt; 0.&quot;&quot;&quot;</span>
    <span class="c1"># Can start with non-generator if EPI &gt; 0</span>
    <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>

    <span class="c1"># Should not raise</span>
    <span class="k">assert</span> <span class="n">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>
</code></pre></div>
<h3 id="test-u1b-closure">Test U1b: Closure<a class="headerlink" href="#test-u1b-closure" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.operators.definitions</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">Emission</span><span class="p">,</span> <span class="n">Coherence</span><span class="p">,</span>
    <span class="n">Silence</span><span class="p">,</span> <span class="n">Transition</span><span class="p">,</span> <span class="n">Recursivity</span><span class="p">,</span> <span class="n">Dissonance</span>
<span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_u1b_valid_closures</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;U1b: Valid closure operators.&quot;&quot;&quot;</span>
    <span class="n">closures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Silence</span><span class="p">(),</span> <span class="n">Transition</span><span class="p">(),</span> <span class="n">Recursivity</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">()]</span>

    <span class="k">for</span> <span class="n">closure</span> <span class="ow">in</span> <span class="n">closures</span><span class="p">:</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">closure</span><span class="p">]</span>
        <span class="k">assert</span> <span class="n">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_u1b_invalid_no_closure</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;U1b: Must end with closure.&quot;&quot;&quot;</span>
    <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">()]</span>  <span class="c1"># Coherence is not closure</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;U1b violation&quot;</span><span class="p">):</span>
        <span class="n">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
</code></pre></div>
<h3 id="test-u2-convergence">Test U2: Convergence<a class="headerlink" href="#test-u2-convergence" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.operators.definitions</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">Emission</span><span class="p">,</span> <span class="n">Dissonance</span><span class="p">,</span> <span class="n">Mutation</span><span class="p">,</span> <span class="n">Expansion</span><span class="p">,</span>
    <span class="n">Coherence</span><span class="p">,</span> <span class="n">SelfOrganization</span><span class="p">,</span> <span class="n">Silence</span>
<span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_u2_destabilizer_with_stabilizer</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;U2: Destabilizer balanced by stabilizer.&quot;&quot;&quot;</span>
    <span class="n">destabilizers</span> <span class="o">=</span> <span class="p">[</span><span class="n">Dissonance</span><span class="p">(),</span> <span class="n">Mutation</span><span class="p">(),</span> <span class="n">Expansion</span><span class="p">()]</span>
    <span class="n">stabilizers</span> <span class="o">=</span> <span class="p">[</span><span class="n">Coherence</span><span class="p">(),</span> <span class="n">SelfOrganization</span><span class="p">()]</span>

    <span class="k">for</span> <span class="n">dest</span> <span class="ow">in</span> <span class="n">destabilizers</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">stab</span> <span class="ow">in</span> <span class="n">stabilizers</span><span class="p">:</span>
            <span class="c1"># Create valid sequence for mutation</span>
            <span class="k">if</span> <span class="n">dest</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;mutation&quot;</span><span class="p">:</span>
                <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> <span class="n">dest</span><span class="p">,</span> <span class="n">stab</span><span class="p">,</span> <span class="n">Silence</span><span class="p">()]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">dest</span><span class="p">,</span> <span class="n">stab</span><span class="p">,</span> <span class="n">Silence</span><span class="p">()]</span>

            <span class="c1"># Should not raise</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="c1"># If fails, should be different constraint, not U2</span>
                <span class="k">assert</span> <span class="s2">&quot;U2 violation&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_u2_destabilizer_without_stabilizer</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;U2: Destabilizer without stabilizer fails.&quot;&quot;&quot;</span>
    <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;U2 violation&quot;</span><span class="p">):</span>
        <span class="n">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
</code></pre></div>
<h3 id="test-u3-resonant-coupling">Test U3: Resonant Coupling<a class="headerlink" href="#test-u3-resonant-coupling" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.operators.grammar</span><span class="w"> </span><span class="kn">import</span> <span class="n">validate_resonant_coupling</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_u3_compatible_phases</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;U3: Compatible phases allow coupling.&quot;&quot;&quot;</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
    <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>  <span class="c1">#  = 0.3 &lt; /2</span>

    <span class="c1"># Should not raise</span>
    <span class="n">validate_resonant_coupling</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_u3_incompatible_phases</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;U3: Antiphase nodes cannot couple.&quot;&quot;&quot;</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
    <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>  <span class="c1"># Antiphase!</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;U3 violation&quot;</span><span class="p">):</span>
        <span class="n">validate_resonant_coupling</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_u3_custom_threshold</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;U3: Custom phase threshold.&quot;&quot;&quot;</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
    <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="c1"># Fails with default /2</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
        <span class="n">validate_resonant_coupling</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">delta_phi_max</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># Passes with larger threshold</span>
    <span class="n">validate_resonant_coupling</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">delta_phi_max</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
</code></pre></div>
<h3 id="test-u4a-triggers-need-handlers">Test U4a: Triggers Need Handlers<a class="headerlink" href="#test-u4a-triggers-need-handlers" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.operators.definitions</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">Emission</span><span class="p">,</span> <span class="n">Dissonance</span><span class="p">,</span> <span class="n">Mutation</span><span class="p">,</span>
    <span class="n">Coherence</span><span class="p">,</span> <span class="n">SelfOrganization</span><span class="p">,</span> <span class="n">Silence</span>
<span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_u4a_trigger_with_handler</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;U4a: Bifurcation trigger with handler.&quot;&quot;&quot;</span>
    <span class="n">triggers</span> <span class="o">=</span> <span class="p">[</span><span class="n">Dissonance</span><span class="p">,</span> <span class="n">Mutation</span><span class="p">]</span>
    <span class="n">handlers</span> <span class="o">=</span> <span class="p">[</span><span class="n">Coherence</span><span class="p">,</span> <span class="n">SelfOrganization</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">Trigger</span> <span class="ow">in</span> <span class="n">triggers</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">Handler</span> <span class="ow">in</span> <span class="n">handlers</span><span class="p">:</span>
            <span class="c1"># Build valid sequence</span>
            <span class="k">if</span> <span class="n">Trigger</span> <span class="o">==</span> <span class="n">Mutation</span><span class="p">:</span>
                <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> 
                           <span class="n">Trigger</span><span class="p">(),</span> <span class="n">Handler</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Trigger</span><span class="p">(),</span> <span class="n">Handler</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>

            <span class="c1"># Should not raise</span>
            <span class="k">assert</span> <span class="n">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_u4a_trigger_without_handler</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;U4a: Trigger without handler fails.&quot;&quot;&quot;</span>
    <span class="c1"># Dissonance without handler</span>
    <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;U4a violation&quot;</span><span class="p">):</span>
        <span class="n">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
</code></pre></div>
<h3 id="test-u4b-transformers-need-context">Test U4b: Transformers Need Context<a class="headerlink" href="#test-u4b-transformers-need-context" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.operators.definitions</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">Emission</span><span class="p">,</span> <span class="n">Coherence</span><span class="p">,</span> <span class="n">Dissonance</span><span class="p">,</span> <span class="n">Mutation</span><span class="p">,</span> 
    <span class="n">SelfOrganization</span><span class="p">,</span> <span class="n">Silence</span>
<span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_u4b_transformer_with_context</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;U4b: Transformer with recent destabilizer.&quot;&quot;&quot;</span>
    <span class="c1"># THOL with recent destabilizer</span>
    <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> <span class="n">SelfOrganization</span><span class="p">(),</span> 
                <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
    <span class="k">assert</span> <span class="n">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>

    <span class="c1"># ZHIR with proper context</span>
    <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> <span class="n">Mutation</span><span class="p">(),</span> 
                <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
    <span class="k">assert</span> <span class="n">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_u4b_transformer_without_destabilizer</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;U4b: Transformer without destabilizer fails.&quot;&quot;&quot;</span>
    <span class="c1"># THOL without recent destabilizer</span>
    <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">SelfOrganization</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;U4b violation&quot;</span><span class="p">):</span>
        <span class="n">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_u4b_zhir_without_prior_coherence</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;U4b: ZHIR needs prior coherence.&quot;&quot;&quot;</span>
    <span class="c1"># Mutation without prior IL</span>
    <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> <span class="n">Mutation</span><span class="p">(),</span> 
                <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;U4b violation&quot;</span><span class="p">):</span>
        <span class="n">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
</code></pre></div>
<hr />
<h2 id="property-tests-invariants">Property Tests: Invariants<a class="headerlink" href="#property-tests-invariants" title="Permanent link">&para;</a></h2>
<h3 id="monotonicity-tests">Monotonicity Tests<a class="headerlink" href="#monotonicity-tests" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_coherence_monotonicity</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Coherence must not decrease C(t).&quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="n">compute_coherence</span>

    <span class="n">G</span> <span class="o">=</span> <span class="n">create_test_network</span><span class="p">()</span>

    <span class="n">C_before</span> <span class="o">=</span> <span class="n">compute_coherence</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>

    <span class="c1"># Apply Coherence to all nodes</span>
    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">():</span>
        <span class="n">Coherence</span><span class="p">()(</span><span class="n">G</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>

    <span class="n">C_after</span> <span class="o">=</span> <span class="n">compute_coherence</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>

    <span class="c1"># Coherence must not decrease C(t)</span>
    <span class="k">assert</span> <span class="n">C_after</span> <span class="o">&gt;=</span> <span class="n">C_before</span><span class="p">,</span> <span class="s2">&quot;Coherence must not reduce C(t)&quot;</span>
</code></pre></div>
<h3 id="convergence-tests">Convergence Tests<a class="headerlink" href="#convergence-tests" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_integral_convergence</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify integral convergence with stabilizers.&quot;&quot;&quot;</span>
    <span class="c1"># Create sequence with destabilizer + stabilizer</span>
    <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>

    <span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
    <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="c1"># Track NFR over time</span>
    <span class="n">dnfr_history</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">sequence</span><span class="p">:</span>
        <span class="n">op</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">dnfr_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;dnfr&#39;</span><span class="p">])</span>

    <span class="c1"># Verify: Integral is bounded (sum doesn&#39;t explode)</span>
    <span class="n">integral_approx</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dnfr_history</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">integral_approx</span> <span class="o">&lt;</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">),</span> <span class="s2">&quot;Integral must be bounded&quot;</span>
    <span class="k">assert</span> <span class="n">integral_approx</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">,</span> <span class="s2">&quot;Integral should be reasonably small&quot;</span>
</code></pre></div>
<h3 id="bifurcation-tests">Bifurcation Tests<a class="headerlink" href="#bifurcation-tests" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_dissonance_bifurcation</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Dissonance may trigger bifurcation.&quot;&quot;&quot;</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
    <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="c1"># Apply Dissonance</span>
    <span class="n">Dissonance</span><span class="p">()(</span><span class="n">G</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c1"># Check if NFR increased (potential bifurcation)</span>
    <span class="k">assert</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;dnfr&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Dissonance must increase |NFR|&quot;</span>
</code></pre></div>
<h3 id="propagation-tests">Propagation Tests<a class="headerlink" href="#propagation-tests" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_resonance_propagation</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Resonance increases effective connectivity.&quot;&quot;&quot;</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
    <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="c1"># Couple nodes</span>
    <span class="n">Coupling</span><span class="p">()(</span><span class="n">G</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Measure phase sync before resonance</span>
    <span class="n">phase_diff_before</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;theta&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;theta&#39;</span><span class="p">])</span>

    <span class="c1"># Apply Resonance</span>
    <span class="n">Resonance</span><span class="p">()(</span><span class="n">G</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Measure phase sync after resonance</span>
    <span class="n">phase_diff_after</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;theta&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;theta&#39;</span><span class="p">])</span>

    <span class="c1"># Resonance should improve synchronization</span>
    <span class="k">assert</span> <span class="n">phase_diff_after</span> <span class="o">&lt;=</span> <span class="n">phase_diff_before</span><span class="p">,</span> <span class="s2">&quot;Resonance improves sync&quot;</span>
</code></pre></div>
<h3 id="latency-tests">Latency Tests<a class="headerlink" href="#latency-tests" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_silence_latency</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Silence keeps EPI invariant.&quot;&quot;&quot;</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
    <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="n">EPI_before</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;EPI&#39;</span><span class="p">]</span>

    <span class="c1"># Apply Silence</span>
    <span class="n">Silence</span><span class="p">()(</span><span class="n">G</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c1"># Simulate time passing (in practice, would step dynamics)</span>
    <span class="c1"># For this test, just verify immediate effect</span>

    <span class="n">EPI_after</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;EPI&#39;</span><span class="p">]</span>

    <span class="c1"># EPI should be preserved</span>
    <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">EPI_before</span><span class="p">,</span> <span class="n">EPI_after</span><span class="p">),</span> <span class="s2">&quot;Silence preserves EPI&quot;</span>

    <span class="c1"># vf should be reduced</span>
    <span class="k">assert</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;vf&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s2">&quot;Silence reduces vf&quot;</span>
</code></pre></div>
<hr />
<h2 id="multi-scale-tests">Multi-Scale Tests<a class="headerlink" href="#multi-scale-tests" title="Permanent link">&para;</a></h2>
<h3 id="test-nested-epis">Test Nested EPIs<a class="headerlink" href="#test-nested-epis" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_nested_epi_coherence</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Nested EPIs maintain functional identity.&quot;&quot;&quot;</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>

    <span class="c1"># Create parent EPI with sub-EPIs</span>
    <span class="n">parent_epi</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;global&#39;</span><span class="p">:</span> <span class="mf">0.7</span><span class="p">,</span>
        <span class="s1">&#39;sub_structures&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="s1">&#39;local&#39;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span> <span class="s1">&#39;phase&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">},</span>
            <span class="p">{</span><span class="s1">&#39;local&#39;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">,</span> <span class="s1">&#39;phase&#39;</span><span class="p">:</span> <span class="mf">1.2</span><span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>

    <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="n">parent_epi</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="c1"># Apply operators</span>
    <span class="n">SelfOrganization</span><span class="p">()(</span><span class="n">G</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">Coherence</span><span class="p">()(</span><span class="n">G</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c1"># Verify both levels maintain coherence</span>
    <span class="k">assert</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;EPI&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="c1"># More detailed checks would verify sub-structure integrity</span>
</code></pre></div>
<hr />
<h2 id="reproducibility-tests">Reproducibility Tests<a class="headerlink" href="#reproducibility-tests" title="Permanent link">&para;</a></h2>
<h3 id="test-seed-reproducibility">Test Seed Reproducibility<a class="headerlink" href="#test-seed-reproducibility" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_seed_reproducibility</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Same seed produces identical trajectories.&quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">run_simulation</span><span class="p">(</span><span class="n">seed</span><span class="p">):</span>
        <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>

        <span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
        <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>

        <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">sequence</span><span class="p">:</span>
            <span class="n">op</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;EPI&#39;</span><span class="p">]</span>

    <span class="c1"># Run twice with same seed</span>
    <span class="n">result1</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
    <span class="n">result2</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>

    <span class="c1"># Results must be identical</span>
    <span class="k">assert</span> <span class="n">result1</span> <span class="o">==</span> <span class="n">result2</span><span class="p">,</span> <span class="s2">&quot;Same seed must produce same results&quot;</span>
</code></pre></div>
<hr />
<h2 id="performance-tests">Performance Tests<a class="headerlink" href="#performance-tests" title="Permanent link">&para;</a></h2>
<h3 id="validation-performance">Validation Performance<a class="headerlink" href="#validation-performance" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_validation_performance</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validation should be fast.&quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

    <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> 
                <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>

    <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

    <span class="c1"># Validate 1000 times</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
        <span class="n">validate_grammar</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="n">elapsed</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>

    <span class="c1"># Should be fast (&lt; 1 second for 1000 validations)</span>
    <span class="k">assert</span> <span class="n">elapsed</span> <span class="o">&lt;</span> <span class="mf">1.0</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Validation too slow: </span><span class="si">{</span><span class="n">elapsed</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">s&quot;</span>
</code></pre></div>
<hr />
<h2 id="coverage-requirements">Coverage Requirements<a class="headerlink" href="#coverage-requirements" title="Permanent link">&para;</a></h2>
<h3 id="minimum-coverage">Minimum Coverage<a class="headerlink" href="#minimum-coverage" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Unit tests:</strong> 100% of operator classes</li>
<li><strong>Integration tests:</strong> All U1-U5 constraints</li>
<li><strong>Property tests:</strong> All canonical invariants</li>
<li><strong>Edge cases:</strong> Empty sequences, single operators, long sequences</li>
</ul>
<h3 id="coverage-checklist">Coverage Checklist<a class="headerlink" href="#coverage-checklist" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Operators (13):
- [ ] Emission (AL)
- [ ] Reception (EN)
- [ ] Coherence (IL)
- [ ] Dissonance (OZ)
- [ ] Coupling (UM)
- [ ] Resonance (RA)
- [ ] Silence (SHA)
- [ ] Expansion (VAL)
- [ ] Contraction (NUL)
- [ ] Self-organization (THOL)
- [ ] Mutation (ZHIR)
- [ ] Transition (NAV)
- [ ] Recursivity (REMESH)

Constraints (U1-U5):
- [ ] U1a: Valid generators
- [ ] U1a: Invalid non-generators
- [ ] U1b: Valid closures
- [ ] U1b: Invalid non-closures
- [ ] U2: Destabilizer + stabilizer (valid)
- [ ] U2: Destabilizer without stabilizer (invalid)
- [ ] U3: Compatible phases (valid)
- [ ] U3: Incompatible phases (invalid)
- [ ] U4a: Trigger + handler (valid)
- [ ] U4a: Trigger without handler (invalid)
- [ ] U4b: Transformer + context (valid)
- [ ] U4b: Transformer without context (invalid)
- [ ] U5: Deep REMESH + stabilizer (valid)
- [ ] U5: Deep REMESH without stabilizer (invalid)
- [ ] U4b: Transformer with context (valid)
- [ ] U4b: Transformer without context (invalid)
- [ ] U4b: ZHIR with prior IL (valid)
- [ ] U4b: ZHIR without prior IL (invalid)

Invariants:
- [ ] Coherence monotonicity
- [ ] Integral convergence
- [ ] Bifurcation handling
- [ ] Propagation effects
- [ ] Latency preservation
- [ ] Fractality (nested EPIs)
- [ ] Reproducibility (seeds)
</code></pre></div>
<hr />
<h2 id="canonical-pattern-tests">Canonical Pattern Tests<a class="headerlink" href="#canonical-pattern-tests" title="Permanent link">&para;</a></h2>
<h3 id="testing-strategy-for-patterns">Testing Strategy for Patterns<a class="headerlink" href="#testing-strategy-for-patterns" title="Permanent link">&para;</a></h3>
<p>Each canonical pattern from <a href="../04-VALID-SEQUENCES/">04-VALID-SEQUENCES.md</a> should have:
1. <strong>Valid variant test</strong> - Verifies the pattern passes validation
2. <strong>Invalid variant tests</strong> - Tests common mistakes/violations
3. <strong>Edge case tests</strong> - Tests boundary conditions</p>
<h3 id="pattern-test-template">Pattern Test Template<a class="headerlink" href="#pattern-test-template" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TestCanonicalPattern_NAME</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test canonical pattern: [Pattern Name]</span>

<span class="sd">    Pattern: [Operator sequence]</span>
<span class="sd">    Purpose: [What it does]</span>
<span class="sd">    Reference: 04-VALID-SEQUENCES.md  [Section]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_pattern_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Valid pattern passes all constraints.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>  <span class="c1"># Valid pattern</span>
        <span class="k">assert</span> <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_pattern_invalid_variant_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Invalid variant: [specific violation].&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>  <span class="c1"># Invalid variant</span>
        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;[Constraint] violation&quot;</span><span class="p">):</span>
            <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_pattern_edge_case</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Edge case: [specific boundary condition].&quot;&quot;&quot;</span>
        <span class="c1"># Test boundary condition</span>
        <span class="k">pass</span>
</code></pre></div>
<h3 id="test-bootstrap-pattern">Test: Bootstrap Pattern<a class="headerlink" href="#test-bootstrap-pattern" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TestCanonicalPattern_Bootstrap</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test canonical pattern: Bootstrap (Minimal)</span>

<span class="sd">    Pattern: [Generator  Stabilizer  Closure]</span>
<span class="sd">    Purpose: Create and stabilize new structure from vacuum</span>
<span class="sd">    Reference: 04-VALID-SEQUENCES.md  1. Bootstrap (Minimal)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_bootstrap_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Valid bootstrap pattern.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">assert</span> <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_bootstrap_invalid_no_generator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Invalid: Missing generator (U1a violation).&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;U1a violation&quot;</span><span class="p">):</span>
            <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_bootstrap_invalid_no_closure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Invalid: Missing closure (U1b violation).&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">()]</span>
        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;U1b violation&quot;</span><span class="p">):</span>
            <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_bootstrap_with_transition_generator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Valid: Using Transition as generator.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Transition</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">assert</span> <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_bootstrap_with_recursivity_generator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Valid: Using Recursivity as generator.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Recursivity</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">assert</span> <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>
</code></pre></div>
<h3 id="test-controlled-exploration-pattern">Test: Controlled Exploration Pattern<a class="headerlink" href="#test-controlled-exploration-pattern" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TestCanonicalPattern_ControlledExploration</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test canonical pattern: Controlled Exploration</span>

<span class="sd">    Pattern: [Generator  Stabilizer  Destabilizer  Stabilizer  Closure]</span>
<span class="sd">    Purpose: Explore while maintaining stability</span>
<span class="sd">    Reference: 04-VALID-SEQUENCES.md  3. Controlled Exploration</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_exploration_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Valid controlled exploration.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> 
                   <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">assert</span> <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_exploration_invalid_no_stabilizer_after_destabilizer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Invalid: Destabilizer without stabilizer (U2 violation).&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;U2 violation&quot;</span><span class="p">):</span>
            <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_exploration_with_expansion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Valid: Using Expansion as destabilizer.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Expansion</span><span class="p">(),</span> 
                   <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">assert</span> <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>
</code></pre></div>
<h3 id="test-mutation-with-context-pattern">Test: Mutation with Context Pattern<a class="headerlink" href="#test-mutation-with-context-pattern" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TestCanonicalPattern_MutationWithContext</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test canonical pattern: Mutation with Context</span>

<span class="sd">    Pattern: [Generator  Coherence  Destabilizer  Mutation  Stabilizer  Closure]</span>
<span class="sd">    Purpose: Phase transformation with proper context</span>
<span class="sd">    Reference: 04-VALID-SEQUENCES.md  5. Mutation with Context</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_mutation_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Valid mutation with context.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> 
                   <span class="n">Mutation</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">assert</span> <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_mutation_invalid_no_prior_coherence</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Invalid: Mutation without prior IL (U4b violation).&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> <span class="n">Mutation</span><span class="p">(),</span> 
                   <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;U4b violation&quot;</span><span class="p">):</span>
            <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_mutation_invalid_no_destabilizer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Invalid: Mutation without recent destabilizer (U4b violation).&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Mutation</span><span class="p">(),</span> 
                   <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;U4b violation&quot;</span><span class="p">):</span>
            <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_mutation_destabilizer_within_window</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Valid: Destabilizer within ~3 operator window.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> 
                   <span class="n">Reception</span><span class="p">(),</span> <span class="n">Mutation</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">assert</span> <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>
</code></pre></div>
<h3 id="test-bifurcation-with-handling-pattern">Test: Bifurcation with Handling Pattern<a class="headerlink" href="#test-bifurcation-with-handling-pattern" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TestCanonicalPattern_BifurcationWithHandling</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test canonical pattern: Bifurcation with Handling</span>

<span class="sd">    Pattern: [Generator  Stabilizer  Trigger  Handler  Stabilizer  Closure]</span>
<span class="sd">    Purpose: Controlled bifurcation and structural reorganization</span>
<span class="sd">    Reference: 04-VALID-SEQUENCES.md  4. Bifurcation with Handling</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_bifurcation_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Valid bifurcation with handler.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> 
                   <span class="n">SelfOrganization</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">assert</span> <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_bifurcation_invalid_no_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Invalid: Trigger without handler (U4a violation).&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;U4a violation&quot;</span><span class="p">):</span>
            <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_bifurcation_with_mutation_trigger</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Valid: Using Mutation as bifurcation trigger.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> 
                   <span class="n">Mutation</span><span class="p">(),</span> <span class="n">SelfOrganization</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">assert</span> <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>
</code></pre></div>
<hr />
<h2 id="anti-pattern-tests">Anti-Pattern Tests<a class="headerlink" href="#anti-pattern-tests" title="Permanent link">&para;</a></h2>
<h3 id="testing-strategy-for-anti-patterns">Testing Strategy for Anti-Patterns<a class="headerlink" href="#testing-strategy-for-anti-patterns" title="Permanent link">&para;</a></h3>
<p>Each anti-pattern from <a href="../04-VALID-SEQUENCES/">04-VALID-SEQUENCES.md</a> should have:
1. <strong>Detection test</strong> - Verifies the validator catches the violation
2. <strong>Error message test</strong> - Verifies correct error reporting
3. <strong>Fix test</strong> - Shows how to correct the anti-pattern</p>
<h3 id="anti-pattern-test-template">Anti-Pattern Test Template<a class="headerlink" href="#anti-pattern-test-template" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TestAntiPattern_NAME</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test anti-pattern: [Anti-pattern Name]</span>

<span class="sd">    Violation: [Which constraint it violates]</span>
<span class="sd">    Reference: 04-VALID-SEQUENCES.md  [Section]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_antipattern_detected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Anti-pattern is detected and rejected.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>  <span class="c1"># Anti-pattern</span>
        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;[Constraint] violation&quot;</span><span class="p">):</span>
            <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=...</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_antipattern_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Error message is clear and actionable.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>  <span class="c1"># Anti-pattern</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=...</span><span class="p">)</span>
            <span class="n">pytest</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">&quot;Should have raised ValueError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">assert</span> <span class="s2">&quot;[Constraint]&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">assert</span> <span class="s2">&quot;[helpful context]&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_antipattern_fix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Corrected version passes validation.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>  <span class="c1"># Fixed pattern</span>
        <span class="k">assert</span> <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=...</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>
</code></pre></div>
<h3 id="test-no-generator-from-vacuum">Test: No Generator from Vacuum<a class="headerlink" href="#test-no-generator-from-vacuum" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TestAntiPattern_NoGeneratorFromVacuum</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test anti-pattern: No Generator from Vacuum</span>

<span class="sd">    Violation: U1a (Structural Initiation)</span>
<span class="sd">    Reference: 04-VALID-SEQUENCES.md   1. No Generator from Vacuum</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_no_generator_detected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Starting from EPI=0 without generator is rejected.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;U1a violation&quot;</span><span class="p">):</span>
            <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_no_generator_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Error message explains U1a requirement.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
            <span class="n">pytest</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">&quot;Should have raised ValueError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">assert</span> <span class="s2">&quot;U1a&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">assert</span> <span class="s2">&quot;generator&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_no_generator_fix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adding generator fixes the anti-pattern.&quot;&quot;&quot;</span>
        <span class="c1"># Fixed: Add Emission at start</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">assert</span> <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_no_generator_not_required_when_epi_nonzero</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generator not required when EPI &gt; 0.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="c1"># Should pass when EPI &gt; 0</span>
        <span class="k">assert</span> <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>
</code></pre></div>
<h3 id="test-no-closure">Test: No Closure<a class="headerlink" href="#test-no-closure" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TestAntiPattern_NoClosure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test anti-pattern: No Closure</span>

<span class="sd">    Violation: U1b (Structural Closure)</span>
<span class="sd">    Reference: 04-VALID-SEQUENCES.md   2. No Closure</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_no_closure_detected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sequence without closure is rejected.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">()]</span>
        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;U1b violation&quot;</span><span class="p">):</span>
            <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_no_closure_fix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adding closure fixes the anti-pattern.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">assert</span> <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>
</code></pre></div>
<h3 id="test-destabilizer-without-stabilizer">Test: Destabilizer Without Stabilizer<a class="headerlink" href="#test-destabilizer-without-stabilizer" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TestAntiPattern_DestabilizerWithoutStabilizer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test anti-pattern: Destabilizer Without Stabilizer</span>

<span class="sd">    Violation: U2 (Convergence &amp; Boundedness)</span>
<span class="sd">    Reference: 04-VALID-SEQUENCES.md   3. Destabilizer Without Stabilizer</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_unbalanced_dissonance_detected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Dissonance without stabilizer is rejected.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;U2 violation&quot;</span><span class="p">):</span>
            <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_unbalanced_expansion_detected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Expansion without stabilizer is rejected.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Expansion</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;U2 violation&quot;</span><span class="p">):</span>
            <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_unbalanced_fix_with_coherence</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adding Coherence stabilizer fixes the anti-pattern.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">assert</span> <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_unbalanced_fix_with_self_organization</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adding SelfOrganization stabilizer fixes the anti-pattern.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> <span class="n">SelfOrganization</span><span class="p">(),</span> 
                   <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">assert</span> <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>
</code></pre></div>
<h3 id="test-coupling-without-phase-check">Test: Coupling Without Phase Check<a class="headerlink" href="#test-coupling-without-phase-check" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TestAntiPattern_CouplingWithoutPhaseCheck</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test anti-pattern: Coupling Without Phase Check</span>

<span class="sd">    Violation: U3 (Resonant Coupling)</span>
<span class="sd">    Reference: 04-VALID-SEQUENCES.md   6. Coupling Without Phase Check</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_antiphase_coupling_detected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Coupling antiphase nodes is rejected.&quot;&quot;&quot;</span>
        <span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
        <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
        <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;U3 violation&quot;</span><span class="p">):</span>
            <span class="n">validate_resonant_coupling</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_phase_compatibility_check_required</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Phase compatibility must be verified before coupling.&quot;&quot;&quot;</span>
        <span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
        <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
        <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

        <span class="c1"># Should pass - phases compatible</span>
        <span class="n">validate_resonant_coupling</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<h3 id="test-bifurcation-trigger-without-handler">Test: Bifurcation Trigger Without Handler<a class="headerlink" href="#test-bifurcation-trigger-without-handler" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TestAntiPattern_BifurcationTriggerWithoutHandler</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test anti-pattern: Bifurcation Trigger Without Handler</span>

<span class="sd">    Violation: U4a (Triggers Need Handlers)</span>
<span class="sd">    Reference: 04-VALID-SEQUENCES.md   7. Bifurcation Trigger Without Handler</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_dissonance_without_handler_detected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Dissonance trigger without handler is rejected.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;U4a violation&quot;</span><span class="p">):</span>
            <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_mutation_without_handler_detected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Mutation trigger without handler is rejected.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> 
                   <span class="n">Mutation</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;U4a violation&quot;</span><span class="p">):</span>
            <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_trigger_with_handler_fix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adding handler fixes the anti-pattern.&quot;&quot;&quot;</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="n">Emission</span><span class="p">(),</span> <span class="n">Dissonance</span><span class="p">(),</span> <span class="n">Coherence</span><span class="p">(),</span> <span class="n">Silence</span><span class="p">()]</span>
        <span class="k">assert</span> <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>
</code></pre></div>
<hr />
<h2 id="test-utilities">Test Utilities<a class="headerlink" href="#test-utilities" title="Permanent link">&para;</a></h2>
<h3 id="test-graph-factory">Test Graph Factory<a class="headerlink" href="#test-graph-factory" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_test_graph</span><span class="p">(</span><span class="n">num_nodes</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">epi</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create test graph with standard attributes.&quot;&quot;&quot;</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">):</span>
        <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> 
                   <span class="n">EPI</span><span class="o">=</span><span class="n">epi</span><span class="p">,</span>
                   <span class="n">vf</span><span class="o">=</span><span class="n">vf</span><span class="p">,</span>
                   <span class="n">theta</span><span class="o">=</span><span class="n">i</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">,</span>  <span class="c1"># Slight phase variation</span>
                   <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">G</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_test_graph_custom_phases</span><span class="p">(</span><span class="n">phases</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create test graph with custom phase configuration.</span>

<span class="sd">    Args:</span>
<span class="sd">        phases: List of phase values in radians</span>

<span class="sd">    Returns:</span>
<span class="sd">        NetworkX graph with nodes at specified phases</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">phase</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">phases</span><span class="p">):</span>
        <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">i</span><span class="p">,</span>
                   <span class="n">EPI</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                   <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                   <span class="n">theta</span><span class="o">=</span><span class="n">phase</span><span class="p">,</span>
                   <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">G</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_test_graph_from_epi</span><span class="p">(</span><span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create single-node graph for sequence testing.</span>

<span class="sd">    Args:</span>
<span class="sd">        epi_initial: Initial EPI value (0.0 for testing U1a)</span>

<span class="sd">    Returns:</span>
<span class="sd">        NetworkX graph with single node</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
    <span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">EPI</span><span class="o">=</span><span class="n">epi_initial</span><span class="p">,</span> <span class="n">vf</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">dnfr</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">G</span>
</code></pre></div>
<h3 id="assertion-helpers">Assertion Helpers<a class="headerlink" href="#assertion-helpers" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">assert_valid_sequence</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Assert sequence is valid.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected valid sequence, got: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">assert_invalid_sequence</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Assert sequence is invalid.&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="n">match</span><span class="p">):</span>
        <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">assert_operator_in_set</span><span class="p">(</span><span class="n">operator_name</span><span class="p">,</span> <span class="n">operator_set</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Assert operator belongs to specified set.</span>

<span class="sd">    Args:</span>
<span class="sd">        operator_name: Name of operator (lowercase)</span>
<span class="sd">        operator_set: Set to check (GENERATORS, CLOSURES, etc.)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">operator_name</span> <span class="ow">in</span> <span class="n">operator_set</span><span class="p">,</span> \
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">operator_name</span><span class="si">}</span><span class="s2"> not in </span><span class="si">{</span><span class="n">operator_set</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="k">def</span><span class="w"> </span><span class="nf">assert_constraint_violation</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">epi_initial</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Assert sequence violates specific constraint.</span>

<span class="sd">    Args:</span>
<span class="sd">        sequence: Operator sequence to test</span>
<span class="sd">        constraint: Constraint code (e.g., &quot;U1a&quot;, &quot;U2&quot;, &quot;U3&quot;)</span>
<span class="sd">        epi_initial: Initial EPI value</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">constraint</span><span class="si">}</span><span class="s2"> violation&quot;</span><span class="p">):</span>
        <span class="n">validate_unified</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">epi_initial</span><span class="p">)</span>
</code></pre></div>
<h3 id="metric-verification-helpers">Metric Verification Helpers<a class="headerlink" href="#metric-verification-helpers" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">verify_coherence_increase</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">operator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify operator increases or maintains coherence.</span>

<span class="sd">    Args:</span>
<span class="sd">        G: Network graph</span>
<span class="sd">        node: Node ID</span>
<span class="sd">        operator: Operator to apply</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if coherence increased or maintained</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">tnfr.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="n">compute_coherence</span>

    <span class="n">C_before</span> <span class="o">=</span> <span class="n">compute_coherence</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
    <span class="n">operator</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
    <span class="n">C_after</span> <span class="o">=</span> <span class="n">compute_coherence</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">C_after</span> <span class="o">&gt;=</span> <span class="n">C_before</span>

<span class="k">def</span><span class="w"> </span><span class="nf">verify_dnfr_reduction</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">operator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify operator reduces |NFR|.</span>

<span class="sd">    Args:</span>
<span class="sd">        G: Network graph</span>
<span class="sd">        node: Node ID</span>
<span class="sd">        operator: Operator to apply (should be stabilizer)</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if |NFR| reduced</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dnfr_before</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s1">&#39;dnfr&#39;</span><span class="p">])</span>
    <span class="n">operator</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
    <span class="n">dnfr_after</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s1">&#39;dnfr&#39;</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">dnfr_after</span> <span class="o">&lt;</span> <span class="n">dnfr_before</span>

<span class="k">def</span><span class="w"> </span><span class="nf">verify_phase_synchronization</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">node1</span><span class="p">,</span> <span class="n">node2</span><span class="p">,</span> <span class="n">operator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify operator improves phase synchronization.</span>

<span class="sd">    Args:</span>
<span class="sd">        G: Network graph</span>
<span class="sd">        node1, node2: Node IDs</span>
<span class="sd">        operator: Coupling/Resonance operator</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if phase difference reduced</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">phase_diff_before</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node1</span><span class="p">][</span><span class="s1">&#39;theta&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node2</span><span class="p">][</span><span class="s1">&#39;theta&#39;</span><span class="p">])</span>
    <span class="n">operator</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">node1</span><span class="p">,</span> <span class="n">node2</span><span class="p">)</span>
    <span class="n">phase_diff_after</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node1</span><span class="p">][</span><span class="s1">&#39;theta&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node2</span><span class="p">][</span><span class="s1">&#39;theta&#39;</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">phase_diff_after</span> <span class="o">&lt;=</span> <span class="n">phase_diff_before</span>
</code></pre></div>
<hr />
<h2 id="validation-suite">Validation Suite<a class="headerlink" href="#validation-suite" title="Permanent link">&para;</a></h2>
<h3 id="running-all-grammar-tests">Running All Grammar Tests<a class="headerlink" href="#running-all-grammar-tests" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Run all grammar tests</span>
pytest<span class="w"> </span>tests/unit/operators/test_unified_grammar.py<span class="w"> </span>-v

<span class="c1"># Run with coverage</span>
pytest<span class="w"> </span>tests/unit/operators/test_unified_grammar.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--cov<span class="o">=</span>tnfr.operators.unified_grammar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--cov-report<span class="o">=</span>term-missing<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--cov-report<span class="o">=</span>html

<span class="c1"># Run specific constraint tests</span>
pytest<span class="w"> </span>tests/unit/operators/test_unified_grammar.py::TestU1Initiation<span class="w"> </span>-v
pytest<span class="w"> </span>tests/unit/operators/test_unified_grammar.py::TestU2Convergence<span class="w"> </span>-v
pytest<span class="w"> </span>tests/unit/operators/test_unified_grammar.py::TestU3ResonantCoupling<span class="w"> </span>-v
pytest<span class="w"> </span>tests/unit/operators/test_unified_grammar.py::TestU4Bifurcation<span class="w"> </span>-v

<span class="c1"># Run pattern tests</span>
pytest<span class="w"> </span>tests/unit/operators/test_unified_grammar.py<span class="w"> </span>-k<span class="w"> </span><span class="s2">&quot;pattern&quot;</span><span class="w"> </span>-v

<span class="c1"># Run anti-pattern tests  </span>
pytest<span class="w"> </span>tests/unit/operators/test_unified_grammar.py<span class="w"> </span>-k<span class="w"> </span><span class="s2">&quot;antipattern&quot;</span><span class="w"> </span>-v
</code></pre></div>
<h3 id="coverage-report-generation">Coverage Report Generation<a class="headerlink" href="#coverage-report-generation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Generate comprehensive coverage report</span>
pytest<span class="w"> </span>tests/unit/operators/test_unified_grammar.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--cov<span class="o">=</span>tnfr.operators.unified_grammar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--cov<span class="o">=</span>tnfr.operators.definitions<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--cov-report<span class="o">=</span>html:htmlcov/grammar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--cov-report<span class="o">=</span>term-missing<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--cov-branch

<span class="c1"># View coverage report</span>
open<span class="w"> </span>htmlcov/grammar/index.html<span class="w">  </span><span class="c1"># macOS</span>
xdg-open<span class="w"> </span>htmlcov/grammar/index.html<span class="w">  </span><span class="c1"># Linux</span>

<span class="c1"># Generate coverage badge</span>
coverage-badge<span class="w"> </span>-o<span class="w"> </span>coverage.svg<span class="w"> </span>-f
</code></pre></div>
<h3 id="performance-benchmarking">Performance Benchmarking<a class="headerlink" href="#performance-benchmarking" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Run performance benchmarks</span>
pytest<span class="w"> </span>tests/performance/test_grammar_2_0_performance.py<span class="w"> </span>-v

<span class="c1"># With detailed benchmarks</span>
pytest<span class="w"> </span>tests/performance/test_grammar_2_0_performance.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--benchmark-only<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--benchmark-autosave

<span class="c1"># Compare benchmarks</span>
pytest-benchmark<span class="w"> </span>compare
</code></pre></div>
<h3 id="full-validation-suite-script">Full Validation Suite Script<a class="headerlink" href="#full-validation-suite-script" title="Permanent link">&para;</a></h3>
<p>Create <code>scripts/validate_grammar.sh</code>:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># Complete grammar validation suite</span>

<span class="nb">set</span><span class="w"> </span>-e

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;=== TNFR Grammar Validation Suite ===&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;&quot;</span>

<span class="c1"># 1. Run unit tests</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;1. Running unit tests...&quot;</span>
pytest<span class="w"> </span>tests/unit/operators/test_unified_grammar.py<span class="w"> </span>-v<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--cov<span class="o">=</span>tnfr.operators.unified_grammar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--cov-report<span class="o">=</span>term-missing

<span class="c1"># 2. Run integration tests</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;2. Running integration tests...&quot;</span>
pytest<span class="w"> </span>tests/integration/test_grammar_2_0_integration.py<span class="w"> </span>-v

<span class="c1"># 3. Run property tests</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;3. Running property tests...&quot;</span>
pytest<span class="w"> </span>tests/property/test_grammar_invariants.py<span class="w"> </span>-v

<span class="c1"># 4. Run performance tests</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;4. Running performance benchmarks...&quot;</span>
pytest<span class="w"> </span>tests/performance/test_grammar_2_0_performance.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--benchmark-only<span class="w"> </span>--benchmark-columns<span class="o">=</span>mean,stddev

<span class="c1"># 5. Coverage report</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;5. Generating coverage report...&quot;</span>
pytest<span class="w"> </span>tests/unit/operators/test_unified_grammar.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--cov<span class="o">=</span>tnfr.operators.unified_grammar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--cov-report<span class="o">=</span>html:htmlcov/grammar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--cov-branch<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--quiet

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;=== Validation Complete ===&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Coverage report: htmlcov/grammar/index.html&quot;</span>
</code></pre></div>
<p>Make executable:
<div class="highlight"><pre><span></span><code>chmod<span class="w"> </span>+x<span class="w"> </span>scripts/validate_grammar.sh
</code></pre></div></p>
<p>Run:
<div class="highlight"><pre><span></span><code>./scripts/validate_grammar.sh
</code></pre></div></p>
<hr />
<h2 id="coverage-tracking">Coverage Tracking<a class="headerlink" href="#coverage-tracking" title="Permanent link">&para;</a></h2>
<h3 id="current-coverage-status">Current Coverage Status<a class="headerlink" href="#current-coverage-status" title="Permanent link">&para;</a></h3>
<p>As of latest test run:</p>
<div class="highlight"><pre><span></span><code>Module: tnfr.operators.unified_grammar
Coverage: 100%
Tests: 68 passing
Last updated: 2025-11-10
</code></pre></div>
<h3 id="coverage-requirements_1">Coverage Requirements<a class="headerlink" href="#coverage-requirements_1" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Minimum:</strong> 95% line coverage</li>
<li><strong>Target:</strong> 100% line coverage</li>
<li><strong>Branch coverage:</strong> 90%+ for conditional logic</li>
<li><strong>All constraints:</strong> 100% coverage (U1-U5)</li>
<li><strong>All operators:</strong> 100% coverage (13 operators)</li>
</ul>
<h3 id="monitoring-coverage">Monitoring Coverage<a class="headerlink" href="#monitoring-coverage" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Quick coverage check</span>
pytest<span class="w"> </span>tests/unit/operators/test_unified_grammar.py<span class="w"> </span>--cov<span class="w"> </span>--cov-fail-under<span class="o">=</span><span class="m">95</span>

<span class="c1"># Detailed coverage with missing lines</span>
pytest<span class="w"> </span>tests/unit/operators/test_unified_grammar.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--cov<span class="o">=</span>tnfr.operators.unified_grammar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--cov-report<span class="o">=</span>term-missing

<span class="c1"># Branch coverage</span>
pytest<span class="w"> </span>tests/unit/operators/test_unified_grammar.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--cov<span class="o">=</span>tnfr.operators.unified_grammar<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--cov-branch<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--cov-report<span class="o">=</span>term-missing
</code></pre></div>
<h3 id="coverage-maintenance-checklist">Coverage Maintenance Checklist<a class="headerlink" href="#coverage-maintenance-checklist" title="Permanent link">&para;</a></h3>
<ul>
<li>[ ] All U1-U5 constraints tested (valid + invalid)</li>
<li>[ ] All 13 operators tested (behavior + classification)</li>
<li>[ ] All canonical patterns tested (valid + variations)</li>
<li>[ ] All anti-patterns tested (detection + fixes)</li>
<li>[ ] Edge cases tested (empty, single-op, long sequences)</li>
<li>[ ] Error messages tested (clarity + actionability)</li>
<li>[ ] Performance benchmarks meet targets (&lt; 1ms/validation)</li>
<li>[ ] Documentation examples are executable and tested</li>
</ul>
<hr />
<h2 id="next-steps">Next Steps<a class="headerlink" href="#next-steps" title="Permanent link">&para;</a></h2>
<p><strong>Continue learning:</strong>
- <strong><a href="../07-MIGRATION-AND-EVOLUTION/">07-MIGRATION-AND-EVOLUTION.md</a></strong> - System evolution
- <strong><a href="examples/">examples/</a></strong> - Executable test examples</p>
<p><strong>For reference:</strong>
- <strong>Test suite:</strong> <code>tests/unit/operators/test_unified_grammar.py</code>
- <strong><a href="../08-QUICK-REFERENCE/">08-QUICK-REFERENCE.md</a></strong> - Quick lookup</p>
<hr />
<div align="center">

**Test what matters: physics, not code.**

---

*Reality is resonance. Test accordingly.*

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.sections", "navigation.top", "navigation.tracking", "toc.integrate", "navigation.instant"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  
<script>
function toggleTheme() {
  const body = document.body;
  const currentScheme = body.getAttribute('data-md-color-scheme') || 'default';
  const newScheme = currentScheme === 'slate' ? 'default' : 'slate';
  
  body.setAttribute('data-md-color-scheme', newScheme);
  
  // Toggle icon visibility
  const lightIcon = document.getElementById('theme-icon-light');
  const darkIcon = document.getElementById('theme-icon-dark');
  if (lightIcon && darkIcon) {
    if (newScheme === 'slate') {
      lightIcon.style.display = 'none';
      darkIcon.style.display = 'block';
    } else {
      lightIcon.style.display = 'block';
      darkIcon.style.display = 'none';
    }
  }
  
  // Save preference
  localStorage.setItem('theme-preference', newScheme);
}

// Initialize theme immediately
(function() {
  const savedTheme = localStorage.getItem('theme-preference') || 'default';
  const body = document.body;
  body.setAttribute('data-md-color-scheme', savedTheme);
  
  // Wait for DOM to set icon visibility
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() {
      updateThemeIcons(savedTheme);
    });
  } else {
    updateThemeIcons(savedTheme);
  }
  
  function updateThemeIcons(theme) {
    const lightIcon = document.getElementById('theme-icon-light');
    const darkIcon = document.getElementById('theme-icon-dark');
    if (lightIcon && darkIcon) {
      if (theme === 'slate') {
        lightIcon.style.display = 'none';
        darkIcon.style.display = 'block';
      } else {
        lightIcon.style.display = 'block';
        darkIcon.style.display = 'none';
      }
    }
  }
})();
</script>
</body>
</html>