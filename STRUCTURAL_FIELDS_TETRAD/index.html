<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>TNFR Structural Field Tetrad (Canonical) — TNFR Python Engine</title>
  <meta name="description" content="TNFR documentation: TNFR Structural Field Tetrad (Canonical)">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap"
    >
  <style>
    :root {
      color-scheme: dark;
      --bg: #0e0f11;
      --panel: rgba(24, 25, 27, 0.9);
      --border: rgba(90, 92, 95, 0.4);
      --text: #e4e6eb;
      --muted: #9ea4b3;
      --accent: #6aa0ff;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      line-height: 1.6;
      background: radial-gradient(circle at 20% 20%, #1a1c20, var(--bg));
      color: var(--text);
      min-height: 100vh;
      padding: 2rem;
    }
    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }
        .page {
            max-width: 960px;
            margin: 0 auto;
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 18px;
            padding: 2.5rem 3rem 3rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
        }
        header {
            border-bottom: 1px solid var(--border);
            padding-bottom: 1.5rem;
            margin-bottom: 2rem;
        }
    .home-link { font-weight: 600; color: var(--text); }
        .doc-title {
            display: block;
            font-size: 2.2rem;
            font-weight: 600;
            margin-top: 0.4rem;
        }
        .meta {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
            margin-top: 1rem;
            font-size: 0.95rem;
            color: var(--muted);
        }
    main { font-size: 1rem; }
    main h1 { font-size: 2rem; margin-top: 2.5rem; }
        main h2 {
            font-size: 1.5rem;
            margin-top: 2rem;
            border-bottom: 1px solid var(--border);
            padding-bottom: 0.3rem;
        }
    main h3 { font-size: 1.2rem; margin-top: 1.5rem; }
    main p { margin: 1rem 0; }
        pre {
            background: #0a0b0d;
            padding: 1rem;
            border-radius: 10px;
            overflow-x: auto;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
    code { font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; }
    table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; }
        th, td {
            border: 1px solid var(--border);
            padding: 0.6rem 0.8rem;
            text-align: left;
        }
        blockquote {
            border-left: 4px solid var(--accent);
            margin: 1.5rem 0;
            padding: 0.2rem 1rem;
            color: var(--muted);
            background: rgba(255, 255, 255, 0.02);
        }
        footer {
            border-top: 1px solid var(--border);
            margin-top: 2.5rem;
            padding-top: 1.5rem;
            font-size: 0.9rem;
            color: var(--muted);
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: space-between;
        }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <a class="home-link" href="/TNFR-Python-Engine/">TNFR Python Engine</a>
      <span class="doc-title">TNFR Structural Field Tetrad (Canonical)</span>
      <div class="meta">
        <span>Version 0.0.2 · DOI <a href="https://doi.org/10.5281/zenodo.17764207" target="_blank" rel="noopener">10.5281/zenodo.17764207</a> · Updated 2025-11-29</span>
                <span>
                    Source
                    <a
                        href="https://github.com/fermga/TNFR-Python-Engine/blob/main/docs/STRUCTURAL_FIELDS_TETRAD.md"
                        target="_blank"
                        rel="noopener"
                    >
                        docs/STRUCTURAL_FIELDS_TETRAD.md
                    </a>
                </span>
      </div>
    </header>
    <main>
      <h1 id="tnfr-structural-field-tetrad-canonical">TNFR Structural Field Tetrad (Canonical)</h1>
<p>Status: CANONICAL (Updated 2025-11-12)</p>
<p>This guide centralizes the physics, math, implementation, telemetry, and usage of the four structural fields that characterize TNFR networks across scales. It is the <strong>single canonical source</strong> for formal definitions of Φ_s, |∇φ|, K_φ, and ξ_C; other documents SHOULD reference this file instead of restating the equations.</p>
<ul>
<li>Structural Potential (Φ_s): Global potential from ΔNFR distribution (inverse-square law analog)</li>
<li>Phase Gradient (|∇φ|): Local phase desynchronization (stress proxy)</li>
<li>Phase Curvature (K_φ): Geometric confinement/torsion</li>
<li>Coherence Length (ξ_C): Spatial correlation scale of local coherence</li>
</ul>
<p>References (single sources of truth):
- Theory: TNFR.pdf (§1–2), UNIFIED_GRAMMAR_RULES.md (§U1–U6)
- Canonical status and thresholds: AGENTS.md (Structural Field Tetrad)
- Implementation: src/tnfr/physics/fields.py
- Research background: docs/TNFR_FORCES_EMERGENCE.md (§14–15)
 - Physics module overview: src/tnfr/physics/README.md (unified, expandable)</p>
<hr>
<h2 id="1-physics-basis">1. Physics Basis</h2>
<p>Nodal equation (core TNFR dynamics):</p>
<p>[\frac{\partial EPI}{\partial t} = \nu_f\, \Delta NFR(t)]</p>
<p>Integrated form and boundedness (U2):</p>
<p>[EPI(t_f) = EPI(t_0) + \int_{t_0}^{t_f}! \nu_f(\tau)\,\Delta NFR(\tau)\, d\tau,\quad \text{require } \int \nu_f\, \Delta NFR\, dt &lt; \infty]</p>
<p>Operator grammar enforces convergence via stabilizers (IL, THOL) around destabilizers (OZ, ZHIR, VAL) and requires phase-verification for coupling (U3). Telemetry fields below are read-only; they do not mutate EPI.</p>
<hr>
<h2 id="2-canonical-field-definitions">2. Canonical Field Definitions</h2>
<p>All functions live in <code>tnfr.physics.fields</code> and accept a NetworkX graph <code>G</code> with the following node attributes when applicable:
- <code>theta</code> or <code>phase</code> (float in [0, 2π))
- <code>delta_nfr</code> or <code>dnfr</code> (float; structural pressure proxy)
- Optional <code>coherence</code> (float ∈ (0,1]) for ξ_C estimation</p>
<h3 id="21-structural-potential-_s-global">2.1 Structural Potential Φ_s (Global)</h3>
<p>Definition (α = 2 by default):</p>
<p>[\Phi_s(i) = \sum_{j\neq i} \frac{\Delta NFR_j}{d(i,j)^\alpha}]</p>
<ul>
<li>Long-range, global potential derived from ΔNFR distribution</li>
<li>Safety criterion (telemetry-based): ΔΦ_s &lt; 2.0 typical; escape threshold at ~2.0 (classical: von Koch bounds)</li>
<li>Implementation: <code>compute_structural_potential(G, alpha=2.0)</code></li>
</ul>
<h3 id="22-phase-gradient-local-stress">2.2 Phase Gradient |∇φ| (Local stress)</h3>
<p>Wrapped neighbor differences (circular topology):</p>
<p>[|\nabla\varphi|(i) = \operatorname{mean}_{j\in N(i)} \big|\operatorname{wrap}(\varphi_j-\varphi_i)\big|]</p>
<ul>
<li>Early warning for fragmentation via local desynchronization</li>
<li>Safety criterion: |∇φ| &lt; 0.2904 for stable operation (classical: harmonic analysis + Kuramoto)</li>
<li>Implementation: <code>compute_phase_gradient(G)</code></li>
</ul>
<h3 id="23-phase-curvature-k_-geometric-confinement">2.3 Phase Curvature K_φ (Geometric confinement)</h3>
<p>Deviation from circular neighbor mean:</p>
<p>[K_\varphi(i) = \varphi_i - \frac{1}{\deg(i)} \sum_{j\in N(i)} \varphi_j]</p>
<ul>
<li>Use circular mean (unit vectors) and wrap deltas to (−π, π]</li>
<li>Local threshold: |K_φ| ≥ 2.8274 flags confinement/fault zones (classical: 90% of theoretical maximum π)</li>
<li>Multiscale behavior: var(K_φ) ~ 1/r^α with α≈2.76 (asymptotic freedom)</li>
<li>Implementation:</li>
<li><code>compute_phase_curvature(G)</code></li>
<li><code>compute_k_phi_multiscale_variance(G, scales)</code></li>
<li><code>fit_k_phi_asymptotic_alpha(var_by_scale)</code></li>
<li><code>k_phi_multiscale_safety(G, alpha_hint=2.76)</code></li>
</ul>
<h3 id="24-coherence-length-_c-spatial-correlations">2.4 Coherence Length ξ_C (Spatial correlations)</h3>
<p>Local coherence: (c_i = 1 / (1 + |\Delta NFR_i|)) and spatial autocorrelation (C(r) = \langle c_i c_j\rangle) for pairs at distance r. Fit exponential decay:</p>
<p>[C(r) \sim \exp(-r/\xi_C)]</p>
<ul>
<li>Critical point behavior: ξ_C diverges near I_c (phase transitions)</li>
<li>Safety cues: ξ_C &gt; system diameter (critical), ξ_C &gt; π × mean_distance (watch, π≈3.1416), ξ_C &lt; mean_distance (stable)</li>
<li>Implementation:</li>
<li><code>estimate_coherence_length(G, coherence_key='coherence')</code></li>
<li><code>fit_correlation_length_exponent(Is, xi_vals, I_c, min_distance)</code></li>
</ul>
<hr>
<h2 id="3-contracts-units-and-invariants">3. Contracts, Units, and Invariants</h2>
<ul>
<li>Read-only telemetry: No EPI mutation; fields compute from current node attributes</li>
<li>Units: ν_f in Hz_str; do not mix with physical Hz (Invariant #2)</li>
<li>Phase coupling requires explicit verification |Δφ| ≤ Δφ_max (U3)</li>
<li>Valid sequences must satisfy U1 initiation/closure and U2 boundedness</li>
<li>Nested EPIs require stabilizers at each level (U5)</li>
</ul>
<p>Edge cases:
- Isolated nodes: return 0.0 for gradients/curvature; ignore in Φ_s sums
- Missing attributes: functions attempt sensible defaults; callers should initialize at least <code>theta</code>/<code>phase</code> and <code>delta_nfr</code>/<code>dnfr</code></p>
<hr>
<h2 id="4-api-summary-tnfrphysicsfields">4. API Summary (tnfr.physics.fields)</h2>
<ul>
<li><code>compute_structural_potential(G, alpha: float = 2.0) -&gt; dict[int,float]</code></li>
<li><code>compute_phase_gradient(G) -&gt; dict[int,float]</code></li>
<li><code>compute_phase_curvature(G) -&gt; dict[int,float]</code></li>
<li><code>compute_k_phi_multiscale_variance(G, scales: tuple[int,...]) -&gt; dict[int,float]</code></li>
<li><code>fit_k_phi_asymptotic_alpha(var_by_scale: dict[int,float]) -&gt; dict</code></li>
<li><code>k_phi_multiscale_safety(G, scales=(1,2,3,5), alpha_hint=2.76, tolerance_factor=2.0, fit_min_r2=0.5) -&gt; dict</code></li>
<li><code>estimate_coherence_length(G, coherence_key='coherence') -&gt; float</code></li>
<li><code>fit_correlation_length_exponent(Is: array, xi_vals: array, I_c: float, min_distance=0.01) -&gt; dict</code></li>
<li><code>measure_phase_symmetry(G) -&gt; dict</code></li>
<li><code>path_integrated_gradient(G, path: list[int]) -&gt; float</code></li>
</ul>
<p>Each function documents parameters and return types inline in <code>fields.py</code>.</p>
<hr>
<h2 id="5-validation-and-safety-thresholds">5. Validation and Safety Thresholds</h2>
<p>Canonical telemetry thresholds (empirical, cross-topology):
- Φ_s: maintain ΔΦ_s &lt; 2.0 (escape threshold)  — see AGENTS.md (U6)
- |∇φ|: keep &lt; 0.38 for stable operation; track spikes as early warning
- K_φ: flag |K_φ| ≥ 2.8274 as hotspots; assess multiscale decay var(K_φ) ~ 1/r^α
- ξ_C: monitor divergence around I_c; large ξ_C indicates global reorganization</p>
<p>Minimum tests (see tests/ and AGENTS.md):
- Coherence monotonicity under IL
- Dissonance-triggered bifurcation with handlers present
- Resonance propagation increases phase synchrony
- Silence preserves EPI
- Mutation threshold crossing changes phase label
- Multiscale nested EPIs maintain coherence
- Seed reproducibility</p>
<hr>
<h2 id="6-workflows-and-tooling">6. Workflows and Tooling</h2>
<ul>
<li>Integrated study: <code>benchmarks/integrated_force_regime_study.py</code> (six-task harness)</li>
<li>Methods comparison: <code>benchmarks/grammar_2_0_benchmarks.py</code> and summaries</li>
<li>Plotting: <code>benchmarks/plot_force_study_summaries.py</code> → saves to <code>results/plots/*.png</code></li>
<li>Notebook: <code>notebooks/Force_Fields_Tetrad_Exploration.ipynb</code> (end-to-end)</li>
<li>Static report: <code>results/reports/Force_Fields_Tetrad_Exploration.html</code></li>
<li>VS Code tasks: <code>.vscode/tasks.json</code></li>
<li>“Export TNFR tetrad HTML report”</li>
<li>“Generate force study plots”</li>
</ul>
<p>Artifacts:
- <code>results/integrated_force_study_summary.json</code>
- <code>results/field_methods_battery_summary.json</code>
- <code>results/plots/*.png</code></p>
<hr>
<h2 id="7-minimal-example">7. Minimal Example</h2>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">from</span> <span class="nn">tnfr.physics.fields</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">compute_structural_potential</span><span class="p">,</span>
    <span class="n">compute_phase_gradient</span><span class="p">,</span>
    <span class="n">compute_phase_curvature</span><span class="p">,</span>
    <span class="n">estimate_coherence_length</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">watts_strogatz_graph</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="c1"># Initialize minimal telemetry</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">():</span>
    <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="s1">&#39;theta&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="mf">59.0</span><span class="p">)</span>
    <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="s1">&#39;delta_nfr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.1</span>

<span class="n">phi</span> <span class="o">=</span> <span class="n">compute_structural_potential</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">2.0</span><span class="p">)</span>
<span class="n">grad</span> <span class="o">=</span> <span class="n">compute_phase_gradient</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
<span class="n">kphi</span> <span class="o">=</span> <span class="n">compute_phase_curvature</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
<span class="n">xi</span> <span class="o">=</span> <span class="n">estimate_coherence_length</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">coherence_key</span><span class="o">=</span><span class="s1">&#39;coherence&#39;</span><span class="p">)</span>  <span class="c1"># if provided</span>
</code></pre></div>

<hr>
<h2 id="8-governance-and-traceability">8. Governance and Traceability</h2>
<ul>
<li>Physics-first: all field definitions derive from nodal equation semantics</li>
<li>No ad-hoc mutations: fields are telemetry-only; EPI changes go through operators</li>
<li>Units and invariants preserved (see AGENTS.md invariants 1–10)</li>
<li>Canonical docs: this page + UNIFIED_GRAMMAR_RULES.md are the reference; research-phase content (e.g., TNFR_FORCES_EMERGENCE.md) is linked but not normative</li>
</ul>
<hr>
<h2 id="9-further-reading">9. Further Reading</h2>
<ul>
<li>AGENTS.md — Canonical invariants and field promotions (Φ_s, |∇φ|, K_φ, ξ_C)</li>
<li>UNIFIED_GRAMMAR_RULES.md — U1–U6 derivations and constraints</li>
<li>TNFR_FORCES_EMERGENCE.md — Historical research path for field validation</li>
<li>SHA_ALGEBRA_PHYSICS.md — Supporting mathematical apparatus</li>
</ul>
<hr>
<h2 id="10-faq">10. FAQ</h2>
<p>Q1. What node attributes are required to compute each field?
- Φ_s: requires <code>delta_nfr</code> or <code>dnfr</code> on nodes; uses graph distances.
- |∇φ| and K_φ: require <code>theta</code> or <code>phase</code> on nodes (float in [0, 2π)).
- ξ_C: optionally uses <code>coherence</code> on nodes; if absent, it estimates from <code>delta_nfr</code> via c_i = 1/(1+|ΔNFR_i|).</p>
<p>Q2. Why are phase differences wrapped? Can I just subtract angles?
- Phases live on the circle. Direct subtraction misinterprets, e.g., 0 and 2π as far apart. We compute circular means (via unit vectors) and wrap differences to (−π, π] to preserve correct geometry.</p>
<p>Q3. How should I choose α in Φ_s?
- α = 2.0 is canonical (inverse-square analog) and validated across topologies. Deviations are research-only; if you change α, document and justify the physics in your application.</p>
<p>Q4. Are thresholds (ΔΦ_s &lt; 2.0, |∇φ| &lt; 0.2904, |K_φ| ≥ 2.8274) universal?
- They are telemetry-based and robust across the tested families (WS, scale-free, grid, trees) but still empirical. Treat them as safety guidance, not as hard correctness proofs. Monitor trends over time, not just single snapshots.</p>
<p>Q5. What graphs are supported? Weighted? Directed?
- Implementations are designed for undirected, unweighted graphs. Φ_s currently uses unweighted shortest-path distances. If your graph is weighted or directed, pre-process to an appropriate undirected/unweighted view or extend the distance routine consistently with TNFR physics.</p>
<p>Q6. What happens if attributes are missing?
- Functions fall back conservatively (e.g., 0.0 for empty neighborhoods) but you should initialize at least <code>theta</code>/<code>phase</code> and <code>delta_nfr</code>/<code>dnfr</code>. For ξ_C, if <code>coherence</code> is missing, it infers local coherence from ΔNFR magnitudes.</p>
<p>Q7. ξ_C returned NaN/inf. What does that mean?
- Near criticality, an exponential fit may be ill-posed (flat or noisy C(r)). Re-run with more samples, verify <code>coherence</code> distribution, or widen the r-range. If the system is truly at/near I_c, very large ξ_C is expected; treat it as a warning for imminent system-wide reorganization.</p>
<p>Q8. How does the tetrad relate to C(t) and Si?
- C(t) is a global coherence scalar; Si measures stable reorganization capacity. The tetrad provides complementary structure: Φ_s (global field), |∇φ| (local stress), K_φ (geometric confinement), ξ_C (spatial correlation scale). Use them together for a complete picture. Note: C(t) is invariant to proportional ΔNFR scaling; |∇φ| often captures early local stress better.</p>
<p>Q9. Performance tips for large graphs?
- Φ_s requires many distance evaluations; on large graphs, consider limiting to a radius, sampling source nodes, or caching all-pairs shortest paths if topology is static. |∇φ| and K_φ are O(E) and scale well. ξ_C can subsample pairs at each distance bin.</p>
<p>Q10. What should I do when safety flags trigger?
- Apply stabilizers (IL, THOL), verify phase-compatibility before coupling (U3), reduce destabilizer intensity (OZ, ZHIR, VAL), and monitor ΔΦ_s, |∇φ|, and K_φ decay across scales. Ensure ν_f units remain in Hz_str and do not mutate EPI outside operators.</p>
<p>Q11. Reproducibility and randomness?
- Set seeds (Python, NumPy) before generating telemetry or randomized structures. The same seed must yield identical trajectories and telemetry (Invariant #8).</p>
<p>Q12. Can I extend these fields or add new ones?
- Yes, but only with physics-first justification. Derive from the nodal equation, preserve invariants, map to operators where applicable, and add tests and documentation. Experimental fields must be clearly labeled non-canonical until validated.</p>
<hr>
<h2 id="appendix-topological-winding-q-complementary-telemetry">Appendix: Topological winding (Q) — complementary telemetry</h2>
<p>While not part of the field tetrad, the topological winding number around a
closed loop provides a complementary invariant for identifying phase defects
and vortex-like structures:</p>
<p>Definition:
  Q = round( (1 / 2π) · Σ wrap(φ_{i+1} − φ_i) ) over a closed cycle.</p>
<ul>
<li>Implementation: <code>tnfr.physics.fields.compute_phase_winding(G, cycle_nodes)</code></li>
<li>Usage: helpful to distinguish plane-wave-like (Q≈0) from vortex-like (Q=±1)
  configurations in pattern studies.</li>
<li>Related initializations: <code>tnfr.physics.patterns.apply_vortex</code>,
  <code>apply_plane_wave</code>, <code>apply_quark_triplet_cluster</code>.</li>
</ul>
<p>This metric is telemetry-only and preserves all canonical invariants.</p>
    </main>
    <footer>
            <span>
                &copy; 2025
                TNFR Python Engine — Licensed under MIT.
            </span>
            <span>
                Feedback?
                <a
                    href="https://github.com/fermga/TNFR-Python-Engine"
                    target="_blank"
                    rel="noopener"
                >
                    Open an issue
                </a>.
            </span>
    </footer>
  </div>
</body>
</html>
